<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISM - ÊäïË≥áÂÆ∂Âêë„ÅëÊÆµÈöéÁöÑÊèêÊ°à„Ç∑„Çπ„ÉÜ„É†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: #f5f7fa;
            color: #2d3748;
            line-height: 1.5;
        }

        .header {
            background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .header h1 {
            font-size: 2.8em;
            letter-spacing: 0.2em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            color: #e2e8f0;
            letter-spacing: 0.05em;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .stage-indicator {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-top: 3px solid #3182ce;
        }

        .stage-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stage-item {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 10px;
        }

        .stage-item:not(:last-child):after {
            content: '';
            position: absolute;
            top: 35px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: #e2e8f0;
            z-index: 0;
        }

        .stage-item.completed:not(:last-child):after {
            background: #38a169;
        }

        .stage-circle {
            width: 60px;
            height: 60px;
            background: #e2e8f0;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            color: #a0aec0;
            position: relative;
            z-index: 1;
        }

        .stage-item.completed .stage-circle {
            background: #38a169;
            color: white;
        }

        .stage-item.current .stage-circle {
            background: #3182ce;
            color: white;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);
        }

        .stage-label {
            font-size: 0.875rem;
            color: #4a5568;
            font-weight: 600;
        }

        .stage-item.completed .stage-label {
            color: #38a169;
        }

        .stage-item.current .stage-label {
            color: #3182ce;
        }

        .nav-tabs {
            display: flex;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .nav-tab {
            padding: 20px 30px;
            background: white;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #4a5568;
            white-space: nowrap;
            transition: all 0.2s ease;
            flex-shrink: 0;
            position: relative;
        }

        .nav-tab.locked {
            background: #f7fafc;
            color: #cbd5e0;
            cursor: not-allowed;
            position: relative;
        }

        .nav-tab.locked:after {
            content: 'üîí';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
        }

        .nav-tab:not(.locked):hover {
            background: #f7fafc;
        }

        .nav-tab.active {
            color: #1a365d;
            border-bottom: 3px solid #3182ce;
            background: #eff6ff;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-top: 3px solid #3182ce;
        }

        .locked-overlay {
            position: relative;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #f7fafc 0%, #e2e8f0 100%);
            border: 2px dashed #cbd5e0;
        }

        .locked-content {
            text-align: center;
            padding: 40px;
        }

        .locked-icon {
            font-size: 4em;
            color: #cbd5e0;
            margin-bottom: 20px;
        }

        .locked-title {
            font-size: 1.5em;
            color: #4a5568;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .locked-description {
            color: #718096;
            margin-bottom: 20px;
        }

        .unlock-button {
            background: linear-gradient(to bottom, #3182ce, #2563eb);
            color: white;
            padding: 12px 30px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
        }

        .unlock-button:hover {
            background: #2563eb;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .section-title {
            color: #1a365d;
            font-size: 1.9em;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
            font-weight: 600;
        }

        .subsection-title {
            color: #1a365d;
            font-size: 1.5em;
            margin: 25px 0 15px;
            font-weight: 600;
            border-left: 4px solid #3182ce;
            padding-left: 15px;
        }

        .property-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-box {
            background: #f7fafc;
            padding: 20px;
            border-left: 4px solid #3182ce;
        }

        .info-box h4 {
            color: #1a365d;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-box p {
            color: #4a5568;
            margin: 5px 0;
        }

        .highlight-number {
            font-size: 2.5em;
            color: #1a365d;
            font-weight: 700;
            display: block;
            margin: 10px 0;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-top: 3px solid #3182ce;
        }

        .kpi-label {
            color: #718096;
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .kpi-value {
            color: #1a365d;
            font-size: 2.5em;
            font-weight: 700;
        }

        .kpi-unit {
            color: #4a5568;
            font-size: 0.875rem;
            margin-top: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            margin: 20px 0;
        }

        thead {
            background: linear-gradient(to bottom, #edf2f7, #e2e8f0);
        }

        th {
            color: #2d3748;
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid #cbd5e0;
            letter-spacing: 0.03em;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
        }

        tr:hover {
            background: #f7fafc;
            transition: background 0.2s;
        }

        .btn-primary {
            background: linear-gradient(to bottom, #3182ce, #2563eb);
            color: white;
            padding: 12px 30px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
            margin: 10px 5px;
        }

        .btn-primary:hover {
            background: #2563eb;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .warning-box {
            background: #fef5e7;
            border-left: 4px solid #f9c74f;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #d68910;
            margin-bottom: 10px;
        }

        .success-box {
            background: #e6fffa;
            border-left: 4px solid #38a169;
            padding: 20px;
            margin: 20px 0;
        }

        .checklist {
            list-style: none;
            padding-left: 0;
        }

        .checklist li {
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
            position: relative;
            padding-left: 35px;
        }

        .checklist li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #38a169;
            font-weight: bold;
            font-size: 1.2em;
        }

        .stage-description {
            background: #eff6ff;
            padding: 20px;
            margin-top: 20px;
        }

        .stage-description h3 {
            color: #1a365d;
            margin-bottom: 10px;
        }

        .action-buttons {
            text-align: center;
            padding: 30px;
            background: #f7fafc;
            margin-top: 30px;
        }

        .footer {
            background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
            color: white;
            padding: 40px 20px 20px;
            margin-top: 50px;
            text-align: center;
        }

        .footer p {
            color: #e2e8f0;
        }

        /* „Ç´„Çπ„Çø„É†„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Áî®„É¢„Éº„ÉÄ„É´ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            overflow: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            background: white;
            margin: 20px auto;
            width: 90%;
            max-width: 1200px;
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(135deg, #1a365d 0%, #2c5282 100%);
            color: white;
            padding: 25px 30px;
            position: relative;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.8em;
            letter-spacing: 0.05em;
        }

        .modal-close {
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 28px;
            color: white;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .modal-close:hover {
            opacity: 0.8;
        }

        .modal-body {
            padding: 30px;
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .simulation-form {
            display: grid;
            gap: 25px;
        }

        .form-section {
            background: #f7fafc;
            padding: 20px;
            border-left: 4px solid #3182ce;
        }

        .form-section-title {
            color: #1a365d;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            color: #4a5568;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: 0.03em;
        }

        .form-input {
            border: 1px solid #cbd5e0;
            padding: 10px 15px;
            font-size: 1rem;
            color: #2d3748;
            background: white;
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #3182ce;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
        }

        .input-group {
            display: flex;
            align-items: center;
        }

        .input-suffix {
            background: #e2e8f0;
            padding: 10px 15px;
            border: 1px solid #cbd5e0;
            border-left: none;
            color: #4a5568;
            font-size: 0.875rem;
        }

        .simulation-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding: 20px;
            background: #f7fafc;
            border-top: 2px solid #e2e8f0;
        }

        .btn-calculate {
            background: linear-gradient(to bottom, #38a169, #2f855a);
            color: white;
            padding: 14px 35px;
            border: none;
            font-weight: 600;
            font-size: 1.1em;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-calculate:hover {
            background: #2f855a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .btn-reset {
            background: #e2e8f0;
            color: #4a5568;
            padding: 14px 35px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-reset:hover {
            background: #cbd5e0;
        }

        .simulation-results {
            display: none;
            margin-top: 30px;
            border-top: 3px solid #3182ce;
            background: white;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .results-header {
            background: linear-gradient(135deg, #eff6ff 0%, white 100%);
            padding: 20px;
            margin: -30px -30px 25px;
            border-bottom: 2px solid #e2e8f0;
        }

        .results-header h3 {
            color: #1a365d;
            margin: 0 0 10px;
            font-size: 1.5em;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .result-card {
            background: #f7fafc;
            padding: 20px;
            text-align: center;
            border-top: 3px solid #3182ce;
        }

        .result-label {
            color: #718096;
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .result-value {
            color: #1a365d;
            font-size: 2em;
            font-weight: 700;
        }

        .result-unit {
            color: #4a5568;
            font-size: 0.875rem;
            margin-top: 5px;
        }

        .cashflow-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            margin-top: 20px;
        }

        .cashflow-table thead {
            background: linear-gradient(to bottom, #edf2f7, #e2e8f0);
        }

        .cashflow-table th {
            color: #2d3748;
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid #cbd5e0;
            letter-spacing: 0.03em;
        }

        .cashflow-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
            color: #4a5568;
        }

        .cashflow-table tr:hover {
            background: #f7fafc;
            transition: background 0.2s;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }
            
            .container {
                padding: 10px;
            }
            
            .section-card {
                padding: 20px;
            }

            .stage-progress {
                flex-direction: column;
            }

            .stage-item:not(:last-child):after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>PRISM</h1>
        <p>Private Real-estate Investment Smart Matching</p>
        <p style="margin-top: 10px;">ÊäïË≥áÂÆ∂ÊßòÂêë„Åë ÊÆµÈöéÁöÑÁâ©‰ª∂ÊèêÊ°à„Ç∑„Çπ„ÉÜ„É†</p>
        <button id="adminToggle" onclick="toggleAdminMode()" style="position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.5); padding: 10px 20px; cursor: pointer; border-radius: 5px; font-weight: 600;">üîß ÁÆ°ÁêÜËÄÖ„É¢„Éº„Éâ</button>
    </div>

    <!-- ÁÆ°ÁêÜËÄÖ„Éë„Éç„É´ -->
    <div id="adminPanel" style="display: none; position: fixed; top: 80px; right: 20px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); width: 320px; z-index: 1000; max-height: 80vh; overflow-y: auto;">
        <h3 style="margin-bottom: 15px; color: #1a365d;">üîß ÁÆ°ÁêÜËÄÖ„Ç≥„É≥„Éà„É≠„Éº„É´</h3>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: #4a5568;">È°ßÂÆ¢„Çø„Ç§„ÉóÈÅ∏Êäû</label>
            <select id="customerType" onchange="changeCustomerType()" style="width: 100%; padding: 8px; border: 1px solid #cbd5e0; border-radius: 5px;">
                <option value="new">Êñ∞Ë¶èÈ°ßÂÆ¢ÔºàÁî∞‰∏≠ÊßòÔºâ- „Çπ„ÉÜ„Éº„Ç∏1</option>
                <option value="interested" selected>Èñ¢ÂøÉÈ°ßÂÆ¢ÔºàÈà¥Êú®ÊßòÔºâ- „Çπ„ÉÜ„Éº„Ç∏2</option>
                <option value="serious">Êú¨Ê†ºÊ§úË®éÔºàÂ±±Áî∞ÊßòÔºâ- „Çπ„ÉÜ„Éº„Ç∏3</option>
                <option value="negotiating">ÂïÜË´á‰∏≠Ôºà‰ΩêËó§ÊßòÔºâ- „Çπ„ÉÜ„Éº„Ç∏4</option>
                <option value="closing">ÊàêÁ¥ÑÂâçÔºàÈ´òÊ©ãÊßòÔºâ- „Çπ„ÉÜ„Éº„Ç∏5</option>
            </select>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; color: #4a5568;">„Çπ„ÉÜ„Éº„Ç∏Áõ¥Êé•ÊåáÂÆö</label>
            <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                <button class="stage-btn" onclick="setStage(1)" style="padding: 8px 16px; border: 1px solid #cbd5e0; background: white; cursor: pointer; border-radius: 5px;">S1</button>
                <button class="stage-btn active" onclick="setStage(2)" style="padding: 8px 16px; border: 1px solid #cbd5e0; background: white; cursor: pointer; border-radius: 5px;">S2</button>
                <button class="stage-btn" onclick="setStage(3)" style="padding: 8px 16px; border: 1px solid #cbd5e0; background: white; cursor: pointer; border-radius: 5px;">S3</button>
                <button class="stage-btn" onclick="setStage(4)" style="padding: 8px 16px; border: 1px solid #cbd5e0; background: white; cursor: pointer; border-radius: 5px;">S4</button>
                <button class="stage-btn" onclick="setStage(5)" style="padding: 8px 16px; border: 1px solid #cbd5e0; background: white; cursor: pointer; border-radius: 5px;">S5</button>
            </div>
        </div>
        
        <div style="margin-bottom: 20px; padding: 15px; background: #f7fafc; border-radius: 5px;">
            <p style="margin-bottom: 5px;"><strong>ÁèæÂú®„ÅÆÁä∂ÊÖãÔºö</strong></p>
            <p style="margin: 2px 0;">È°ßÂÆ¢: <span id="currentCustomer">Èñ¢ÂøÉÈ°ßÂÆ¢ÔºàÈà¥Êú®ÊßòÔºâ</span></p>
            <p style="margin: 2px 0;">„Çπ„ÉÜ„Éº„Ç∏: <span id="currentStageInfo">„Çπ„ÉÜ„Éº„Ç∏2</span></p>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button onclick="unlockAll()" style="padding: 10px; background: #38a169; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">üîì ÂÖ®Ë≥áÊñô„Ç¢„É≥„É≠„ÉÉ„ÇØ</button>
            <button onclick="resetAll()" style="padding: 10px; background: #e53e3e; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">üîÑ „É™„Çª„ÉÉ„Éà</button>
            <button onclick="showAnalytics()" style="padding: 10px; background: #3182ce; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">üìä „Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„Çπ</button>
        </div>
        
        <div id="adminStats" style="display: none; margin-top: 20px; padding: 15px; background: #eff6ff; border-radius: 5px;">
            <h4 style="margin-bottom: 10px; color: #1a365d;">Êú¨Êó•„ÅÆÁµ±Ë®à</h4>
            <p style="margin: 5px 0; font-size: 0.9em;">„Ç¢„ÇØ„Çª„ÇπÊï∞: 127</p>
            <p style="margin: 5px 0; font-size: 0.9em;">„Çπ„ÉÜ„Éº„Ç∏ÈÄ≤Ë°å: 8‰ª∂</p>
            <p style="margin: 5px 0; font-size: 0.9em;">Ë≥áÊñôDL: 23‰ª∂</p>
            <p style="margin: 5px 0; font-size: 0.9em;">ÂïèÂêà„Åõ: 5‰ª∂</p>
        </div>
    </div>

    <div class="container">
        <!-- „Çπ„ÉÜ„Éº„Ç∏„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
        <div class="stage-indicator">
            <h2 style="color: #1a365d; margin-bottom: 20px;">ÁèæÂú®„ÅÆ„Çπ„ÉÜ„Éº„Ç∏</h2>
            <div class="stage-progress">
                <div class="stage-item completed" id="stage1">
                    <div class="stage-circle">1</div>
                    <div class="stage-label">ÂàùÂõûÊé•Ëß¶</div>
                </div>
                <div class="stage-item current" id="stage2">
                    <div class="stage-circle">2</div>
                    <div class="stage-label">Èñ¢ÂøÉË°®Êòé</div>
                </div>
                <div class="stage-item" id="stage3">
                    <div class="stage-circle">3</div>
                    <div class="stage-label">Ë©≥Á¥∞Ê§úË®é</div>
                </div>
                <div class="stage-item" id="stage4">
                    <div class="stage-circle">4</div>
                    <div class="stage-label">ÂïÜË´á</div>
                </div>
                <div class="stage-item" id="stage5">
                    <div class="stage-circle">5</div>
                    <div class="stage-label">ÊúÄÁµÇÁ¢∫Ë™ç</div>
                </div>
            </div>
            <div class="stage-description">
                <h3>„Çπ„ÉÜ„Éº„Ç∏2ÔºöÈñ¢ÂøÉË°®Êòé</h3>
                <p>Áâ©‰ª∂Ê¶ÇË¶Å„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åç„ÄÅ„Çà„ÇäË©≥Á¥∞„Å™ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„ÇãÊÆµÈöé„Åß„Åô„ÄÇ</p>
                <p style="margin-top: 10px;"><strong>„Ç¢„É≥„É≠„ÉÉ„ÇØÊ∏à„ÅøÔºö</strong>Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</p>
                <p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„ÅßÈñãÁ§∫Ôºö</strong>‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÄÅËûçË≥áË®àÁîªË©≥Á¥∞</p>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview', 1)">1. Áâ©‰ª∂Ê¶ÇË¶Å</button>
            <button class="nav-tab" onclick="showTab('simulation', 2)">2. ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</button>
            <button class="nav-tab locked" onclick="showLockedMessage(3)">3. ‰æ°Ê†ºÊüªÂÆö</button>
            <button class="nav-tab locked" onclick="showLockedMessage(4)">4. ËûçË≥áË®àÁîª</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">5. ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">6. ÂøÖË¶ÅÊõ∏È°û‰∏ÄÂºè</button>
        </div>

        <!-- 1. Áâ©‰ª∂Ê¶ÇË¶ÅÔºà„Çπ„ÉÜ„Éº„Ç∏1„ÅßÈñãÁ§∫Ôºâ -->
        <div id="overview" class="tab-content active">
            <div class="section-card">
                <h2 class="section-title">1. Áâ©‰ª∂Ê¶ÇË¶Å„Éª„É≠„Ç±„Éº„Ç∑„Éß„É≥ÂàÜÊûê</h2>
                
                <h3 class="subsection-title">Âü∫Êú¨ÊÉÖÂ†±</h3>
                <div class="property-overview">
                    <div class="info-box">
                        <h4>Áâ©‰ª∂ÂêçÁß∞</h4>
                        <p>PRISMÂçóÈùíÂ±±„Éó„É¨„Éü„Ç¢„É†„É¨„Ç∏„Éá„É≥„Çπ</p>
                        <p>Êù±‰∫¨ÈÉΩÊ∏ØÂå∫ÂçóÈùíÂ±±5-12-8</p>
                    </div>
                    <div class="info-box">
                        <h4>Áâ©‰ª∂„Çø„Ç§„Éó</h4>
                        <p>RCÈÄ† „Éá„Ç∂„Ç§„Éä„Éº„Ç∫„Éû„É≥„Ç∑„Éß„É≥</p>
                        <p>ÁØâÂπ¥ÊúàÔºö2020Âπ¥3ÊúàÁ´£Â∑•</p>
                    </div>
                    <div class="info-box">
                        <h4>Áâ©‰ª∂‰æ°Ê†º</h4>
                        <span class="highlight-number">6.8ÂÑÑÂÜÜ</span>
                        <p>Ë°®Èù¢Âà©Âõû„ÇäÔºö6.35%</p>
                    </div>
                </div>

                <h3 class="subsection-title">Á´ãÂú∞Ë©ï‰æ°</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Ë©ï‰æ°È†ÖÁõÆ</th>
                            <th>ÂÜÖÂÆπ</th>
                            <th>„Çπ„Ç≥„Ç¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ÊúÄÂØÑÈßÖ</td>
                            <td>Êù±‰∫¨„É°„Éà„É≠„ÄåË°®ÂèÇÈÅì„ÄçÈßÖ ÂæíÊ≠©6ÂàÜ / „ÄåÊ∏ãË∞∑„ÄçÈßÖ ÂæíÊ≠©12ÂàÜ</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                        <tr>
                            <td>ÈÉΩÂøÉ„Ç¢„ÇØ„Çª„Çπ</td>
                            <td>ÈäÄÂ∫ßÁ∑ö„ÉªÂçäËîµÈñÄÁ∑ö„ÉªÂçÉ‰ª£Áî∞Á∑öÂà©Áî®ÂèØ„ÄÅ‰∏ªË¶ÅÈßÖÁõ¥ÈÄö</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                        <tr>
                            <td>Âë®Ëæ∫Áí∞Â¢É</td>
                            <td>ÈùíÂ±±ÈÄö„ÇäÊ≤ø„ÅÑ„ÄÅÈ´òÁ¥ö„Éñ„É©„É≥„ÉâÂ∫ó„ÉªÈ£≤È£üÂ∫óÈõÜÁ©ç„Ç®„É™„Ç¢</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="subsection-title">ËøëÈö£Ë≥ÉË≤∏Â∏ÇÂ†¥ÂàÜÊûê</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">„Ç®„É™„Ç¢Âπ≥ÂùáË≥ÉÊñô</div>
                        <div class="kpi-value">28.5</div>
                        <div class="kpi-unit">‰∏áÂÜÜ/ÊúàÔºà1LDKÔºâ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Á©∫ÂÆ§Áéá</div>
                        <div class="kpi-value">2.8</div>
                        <div class="kpi-unit">%ÔºàÊ∏ØÂå∫Âπ≥ÂùáÔºâ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Á´∂ÂêàÁâ©‰ª∂Êï∞</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-unit">Ê£üÔºàÂçäÂæÑ500mÔºâ</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="advanceStage()">Ë©≥Á¥∞ÊÉÖÂ†±„ÇíÂ∏åÊúõ„Åô„Çã</button>
                    <button class="btn-primary" onclick="alert('ÊãÖÂΩìËÄÖ„Å∏ÈÄ£Áµ°')">Ë≥™Âïè„Åô„Çã</button>
                </div>
            </div>
        </div>

        <!-- 2. ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºà„Çπ„ÉÜ„Éº„Ç∏2„ÅßÈñãÁ§∫Ôºâ -->
        <div id="simulation" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">2. ÊäïË≥áÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</h2>
                
                <h3 class="subsection-title">ÊäïË≥áÊ¶ÇË¶Å</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">Áâ©‰ª∂‰æ°Ê†º</div>
                        <div class="kpi-value">6.8</div>
                        <div class="kpi-unit">ÂÑÑÂÜÜ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ÊÉ≥ÂÆöÂπ¥ÈñìË≥ÉÊñô</div>
                        <div class="kpi-value">4,320</div>
                        <div class="kpi-unit">‰∏áÂÜÜ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Ë°®Èù¢Âà©Âõû„Çä</div>
                        <div class="kpi-value">6.35</div>
                        <div class="kpi-unit">%</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ÂÆüË≥™Âà©Âõû„Çä</div>
                        <div class="kpi-value">5.28</div>
                        <div class="kpi-unit">%</div>
                    </div>
                </div>

                <h3 class="subsection-title">„Ç≠„É£„ÉÉ„Ç∑„É•„Éï„É≠„Éº‰∫àÊ∏¨ÔºàÂπ¥ÈñìÔºâ</h3>
                <table>
                    <thead>
                        <tr>
                            <th>È†ÖÁõÆ</th>
                            <th>1Âπ¥ÁõÆ</th>
                            <th>5Âπ¥ÁõÆ</th>
                            <th>10Âπ¥ÁõÆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ë≥ÉÊñôÂèéÂÖ•</td>
                            <td style="text-align: right;">4,320‰∏áÂÜÜ</td>
                            <td style="text-align: right;">4,320‰∏áÂÜÜ</td>
                            <td style="text-align: right;">4,200‰∏áÂÜÜ</td>
                        </tr>
                        <tr>
                            <td>ÁÆ°ÁêÜË≤ª„Éª‰øÆÁπïË≤ª</td>
                            <td style="text-align: right;">-432‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-450‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-480‰∏áÂÜÜ</td>
                        </tr>
                        <tr>
                            <td>„É≠„Éº„É≥ËøîÊ∏àÔºàÊÉ≥ÂÆöÔºâ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                        </tr>
                        <tr style="background: #eff6ff;">
                            <td><strong>Á¥îÂèéÁõäÔºàÁ®éÂâçÔºâ</strong></td>
                            <td style="text-align: right; font-weight: bold; color: #1a365d;">1,662‰∏áÂÜÜ</td>
                            <td style="text-align: right; font-weight: bold; color: #1a365d;">1,650‰∏áÂÜÜ</td>
                            <td style="text-align: right; font-weight: bold; color: #1a365d;">1,505‰∏áÂÜÜ</td>
                        </tr>
                    </tbody>
                </table>

                <div class="action-buttons">
                    <button class="btn-primary" onclick="advanceStage()">‰æ°Ê†ºÊüªÂÆö„ÇíÁ¢∫Ë™ç„Åô„Çã</button>
                    <button class="btn-primary" onclick="openCustomSimulation()">„Ç´„Çπ„Çø„É†„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</button>
                </div>
            </div>
        </div>

        <!-- 3. ‰æ°Ê†ºÊüªÂÆöÔºà„Çπ„ÉÜ„Éº„Ç∏3„ÅßÈñãÁ§∫Ôºâ -->
        <div id="valuation" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">‰æ°Ê†ºÊüªÂÆöÂàÜÊûê</h2>
                        <p class="locked-description">
                            PRISMÁã¨Ëá™„ÅÆ3ÊâãÊ≥ï„Å´„Çà„ÇãË©≥Á¥∞„Å™‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ<br>
                            „Ç®„É™„Ç¢Áõ∏Â†¥„Å®„ÅÆÊØîËºÉ„ÄÅÊäïË≥áÂ¶•ÂΩìÊÄß„ÅÆÂà§ÂÆöÁµêÊûú„ÇíÂê´„Åø„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(3)">
                            „Ç¢„É≥„É≠„ÉÉ„ÇØ„ÇíÁî≥Ë´ã„Åô„Çã
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. ËûçË≥áË®àÁîªÔºà„Çπ„ÉÜ„Éº„Ç∏4„ÅßÈñãÁ§∫Ôºâ -->
        <div id="finance" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">ËûçË≥áË®àÁîªË©≥Á¥∞</h2>
                        <p class="locked-description">
                            ÊèêÊê∫ÈáëËûçÊ©üÈñ¢„ÅÆËûçË≥áÊù°‰ª∂„ÄÅÂøÖË¶ÅÂ±ûÊÄß„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ<br>
                            ÈäÄË°åË©ï‰æ°È°ç‰∫àÊ∏¨„Å™„Å©„ÄÅËûçË≥áÂÆüÁèæ„Å´Âêë„Åë„ÅüË©≥Á¥∞ÊÉÖÂ†±„Çí„ÅîÊèê‰æõ„Åó„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(4)">
                            ÂïÜË´á„ÇíÁî≥„ÅóËæº„ÇÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„ÉºÔºà„Çπ„ÉÜ„Éº„Ç∏5„ÅßÈñãÁ§∫Ôºâ -->
        <div id="summary" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº</h2>
                        <p class="locked-description">
                            Á∑èÂêàË©ï‰æ°„ÄÅ„É™„Çπ„ÇØÂàÜÊûê„ÄÅÊäïË≥á„Çπ„Ç±„Ç∏„É•„Éº„É´Á≠â„ÄÅ<br>
                            ÊúÄÁµÇÁöÑ„Å™ÊäïË≥áÂà§Êñ≠„Å´ÂøÖË¶Å„Å™ÂÖ®ÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„Åü„É¨„Éù„Éº„Éà„Åß„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            ÊúÄÁµÇÊ§úË®éÊÆµÈöé„Å∏ÈÄ≤„ÇÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. ÂøÖË¶ÅÊõ∏È°û‰∏ÄÂºèÔºà„Çπ„ÉÜ„Éº„Ç∏5„ÅßÈñãÁ§∫Ôºâ -->
        <div id="documents" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">Â•ëÁ¥ÑÈñ¢ÈÄ£Êõ∏È°û‰∏ÄÂºè</h2>
                        <p class="locked-description">
                            ÈáçË¶Å‰∫ãÈ†ÖË™¨ÊòéÊõ∏„ÄÅÂ£≤Ë≤∑Â•ëÁ¥ÑÊõ∏Ê°à„ÄÅÁôªË®òÈñ¢ÈÄ£Êõ∏È°ûÁ≠â„ÄÅ<br>
                            Â•ëÁ¥Ñ„Å´ÂøÖË¶Å„Å™ÂÖ®„Å¶„ÅÆÊõ∏È°û„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            Â•ëÁ¥ÑÊ∫ñÂÇô„ÇíÈñãÂßã„Åô„Çã
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- „Ç´„Çπ„Çø„É†„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„É¢„Éº„ÉÄ„É´ -->
    <div id="customSimModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>PRISMÊäïË≥áÂèéÁõä„Ç´„Çπ„Çø„É†„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</h2>
                <span class="modal-close" onclick="closeCustomSimulation()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="simulation-form">
                    <!-- Áâ©‰ª∂ÊÉÖÂ†±„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="form-section">
                        <h3 class="form-section-title">Áâ©‰ª∂ÊÉÖÂ†±</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Áâ©‰ª∂‰æ°Ê†º</label>
                                <div class="input-group">
                                    <input type="number" id="purchasePrice" class="form-input" value="68000" style="flex: 1;">
                                    <span class="input-suffix">‰∏áÂÜÜ</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">È†≠ÈáëÊØîÁéá</label>
                                <div class="input-group">
                                    <input type="number" id="downPayment" class="form-input" value="25" min="0" max="100" style="flex: 1;">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ËûçË≥áÊù°‰ª∂„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="form-section">
                        <h3 class="form-section-title">ËûçË≥áÊù°‰ª∂</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">ÂÄüÂÖ•ÈáëÂà©</label>
                                <div class="input-group">
                                    <input type="number" id="interestRate" class="form-input" value="1.2" step="0.1" min="0" style="flex: 1;">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÂÄüÂÖ•ÊúüÈñì</label>
                                <div class="input-group">
                                    <input type="number" id="loanTerm" class="form-input" value="30" min="1" max="35" style="flex: 1;">
                                    <span class="input-suffix">Âπ¥</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÂèéÁõäÊù°‰ª∂„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="form-section">
                        <h3 class="form-section-title">ÂèéÁõäÊù°‰ª∂</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">ÊúàÈ°çË≥ÉÊñôÂèéÂÖ•</label>
                                <div class="input-group">
                                    <input type="number" id="monthlyRent" class="form-input" value="360" style="flex: 1;">
                                    <span class="input-suffix">‰∏áÂÜÜ</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÊÉ≥ÂÆöÁ©∫ÂÆ§Áéá</label>
                                <div class="input-group">
                                    <input type="number" id="vacancyRate" class="form-input" value="5" min="0" max="100" style="flex: 1;">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÁÆ°ÁêÜË≤ªÁéá</label>
                                <div class="input-group">
                                    <input type="number" id="managementFee" class="form-input" value="5" min="0" max="100" style="flex: 1;">
                                    <span class="input-suffix">%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÁµåË≤ª„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="form-section">
                        <h3 class="form-section-title">„Åù„ÅÆ‰ªñÁµåË≤ª</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Âõ∫ÂÆöË≥áÁî£Á®éÔºàÂπ¥È°çÔºâ</label>
                                <div class="input-group">
                                    <input type="number" id="propertyTax" class="form-input" value="120" style="flex: 1;">
                                    <span class="input-suffix">‰∏áÂÜÜ</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">‰øÆÁπïÁ©çÁ´ãÈáëÔºàÊúàÈ°çÔºâ</label>
                                <div class="input-group">
                                    <input type="number" id="repairReserve" class="form-input" value="10" style="flex: 1;">
                                    <span class="input-suffix">‰∏áÂÜÜ</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÊúüÈñì</label>
                                <div class="input-group">
                                    <input type="number" id="simulationYears" class="form-input" value="10" min="1" max="30" style="flex: 1;">
                                    <span class="input-suffix">Âπ¥</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="simulation-actions">
                    <button class="btn-calculate" onclick="calculateSimulation()">„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÂÆüË°å</button>
                    <button class="btn-reset" onclick="resetSimulationForm()">„É™„Çª„ÉÉ„Éà</button>
                </div>

                <!-- „Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÁµêÊûúË°®Á§∫„Ç®„É™„Ç¢ -->
                <div id="simulationResults" class="simulation-results">
                    <div class="results-header">
                        <h3>„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÁµêÊûú</h3>
                        <p style="color: #718096; margin: 0;">PRISMÁã¨Ëá™„ÅÆÂèéÁõäÂàÜÊûê„Å´„Çà„ÇäÁÆóÂá∫</p>
                    </div>

                    <!-- ÊäïË≥áÊ¶ÇË¶Å -->
                    <h4 style="color: #1a365d; margin-bottom: 15px; border-left: 4px solid #3182ce; padding-left: 15px;">ÊäïË≥áÊ¶ÇË¶Å</h4>
                    <div class="results-summary">
                        <div class="result-card">
                            <div class="result-label">Ëá™Â∑±Ë≥áÈáë</div>
                            <div class="result-value" id="resultEquity">-</div>
                            <div class="result-unit">ÔºàÈ†≠ÈáëÔºãË´∏Ë≤ªÁî®Ôºâ</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">ÂÄüÂÖ•ÈáëÈ°ç</div>
                            <div class="result-value" id="resultLoan">-</div>
                            <div class="result-unit">ËûçË≥áÈ°ç</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">ÊúàÈ°çËøîÊ∏àÈ°ç</div>
                            <div class="result-value" id="resultMonthlyPayment">-</div>
                            <div class="result-unit">ÂÖÉÂà©ÂùáÁ≠â</div>
                        </div>
                    </div>

                    <!-- Âπ¥ÈñìÂèéÊîØ -->
                    <h4 style="color: #1a365d; margin: 25px 0 15px; border-left: 4px solid #3182ce; padding-left: 15px;">Âπ¥ÈñìÂèéÊîØÂàÜÊûê</h4>
                    <div class="results-summary">
                        <div class="result-card">
                            <div class="result-label">Âπ¥ÈñìË≥ÉÊñôÂèéÂÖ•</div>
                            <div class="result-value" id="resultAnnualRent">-</div>
                            <div class="result-unit">Á©∫ÂÆ§ÁéáËÄÉÊÖÆÂæå</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Âπ¥ÈñìÁµåË≤ª</div>
                            <div class="result-value" id="resultAnnualExpense">-</div>
                            <div class="result-unit">„É≠„Éº„É≥ËøîÊ∏àËæº</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">Âπ¥ÈñìÁ¥îÂèéÁõä</div>
                            <div class="result-value" id="resultNetIncome" style="color: #38a169;">-</div>
                            <div class="result-unit">Á®éÂºïÂâç</div>
                        </div>
                    </div>

                    <!-- ÊäïË≥áÊåáÊ®ô -->
                    <h4 style="color: #1a365d; margin: 25px 0 15px; border-left: 4px solid #3182ce; padding-left: 15px;">ÊäïË≥áÊåáÊ®ô</h4>
                    <div class="results-summary">
                        <div class="result-card">
                            <div class="result-label">Ë°®Èù¢Âà©Âõû„Çä</div>
                            <div class="result-value" id="resultGrossYield">-</div>
                            <div class="result-unit">Âπ¥ÈñìË≥ÉÊñô√∑Áâ©‰ª∂‰æ°Ê†º</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">ÂÆüË≥™Âà©Âõû„Çä</div>
                            <div class="result-value" id="resultNetYield">-</div>
                            <div class="result-unit">Á¥îÂèéÁõä√∑Ëá™Â∑±Ë≥áÈáë</div>
                        </div>
                        <div class="result-card">
                            <div class="result-label">ÊäïË≥áÂõûÂèéÊúüÈñì</div>
                            <div class="result-value" id="resultPayback">-</div>
                            <div class="result-unit">Ëá™Â∑±Ë≥áÈáëÂõûÂèéÂπ¥Êï∞</div>
                        </div>
                    </div>

                    <!-- „Ç≠„É£„ÉÉ„Ç∑„É•„Éï„É≠„Éº‰∫àÊ∏¨Ë°® -->
                    <h4 style="color: #1a365d; margin: 25px 0 15px; border-left: 4px solid #3182ce; padding-left: 15px;">„Ç≠„É£„ÉÉ„Ç∑„É•„Éï„É≠„Éº‰∫àÊ∏¨</h4>
                    <table class="cashflow-table">
                        <thead>
                            <tr>
                                <th>Âπ¥Â∫¶</th>
                                <th style="text-align: right;">Ë≥ÉÊñôÂèéÂÖ•</th>
                                <th style="text-align: right;">Âπ¥ÈñìÁµåË≤ª</th>
                                <th style="text-align: right;">Á¥îÂèéÁõä</th>
                                <th style="text-align: right;">Á¥ØË®àÂèéÁõä</th>
                            </tr>
                        </thead>
                        <tbody id="cashflowTable">
                            <!-- JavaScript„ÅßÂãïÁöÑ„Å´ÁîüÊàê -->
                        </tbody>
                    </table>

                    <div class="result-actions">
                        <button class="btn-primary" onclick="downloadSimulation()">Excel„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                        <button class="btn-primary" onclick="saveSimulation()">„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥‰øùÂ≠ò</button>
                        <button class="btn-primary" onclick="requestConsultation()">Â∞ÇÈñÄÂÆ∂„Å´Áõ∏Ë´á</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <h3 style="margin-bottom: 20px;">PRISM - Private Real-estate Investment Smart Matching</h3>
        <p>Ê†™Âºè‰ºöÁ§æ„Éï„É©„É≥„Ç∑„É•„Ç®„ÉÉ„Éà ‰∏çÂãïÁî£‰∫ãÊ•≠ÈÉ®</p>
        <p style="margin-top: 10px;">„Äí103-0014 Êù±‰∫¨ÈÉΩ‰∏≠Â§ÆÂå∫Êó•Êú¨Ê©ãËõéÊÆªÁî∫2-13-5 ÁæéÊøÉÂèã„Éì„É´301A</p>
        <p>TEL: 03-6667-5757 | FAX: 03-6667-5758</p>
        <p style="margin-top: 20px; font-size: 0.9em;">Copyright ¬© Franchette Corp. All Rights Reserved.</p>
    </div>

    <script>
        // ÁèæÂú®„ÅÆ„Çπ„ÉÜ„Éº„Ç∏Ôºà„Éá„É¢Áî®Ôºâ
        let currentStage = 2;
        let isAdminMode = false;
        
        // „Ç´„Çπ„Çø„É†„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ê©üËÉΩ
        function openCustomSimulation() {
            document.getElementById('customSimModal').classList.add('active');
        }

        function closeCustomSimulation() {
            document.getElementById('customSimModal').classList.remove('active');
        }

        function calculateSimulation() {
            // ÂÖ•ÂäõÂÄ§„ÅÆÂèñÂæó
            const purchasePrice = parseFloat(document.getElementById('purchasePrice').value) || 0;
            const downPaymentRatio = parseFloat(document.getElementById('downPayment').value) / 100 || 0;
            const interestRate = parseFloat(document.getElementById('interestRate').value) / 100 || 0;
            const loanTerm = parseInt(document.getElementById('loanTerm').value) || 0;
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const vacancyRate = parseFloat(document.getElementById('vacancyRate').value) / 100 || 0;
            const managementFeeRate = parseFloat(document.getElementById('managementFee').value) / 100 || 0;
            const propertyTax = parseFloat(document.getElementById('propertyTax').value) || 0;
            const repairReserve = parseFloat(document.getElementById('repairReserve').value) || 0;
            const simulationYears = parseInt(document.getElementById('simulationYears').value) || 10;

            // Ë®àÁÆó
            const equity = purchasePrice * downPaymentRatio;
            const loanAmount = purchasePrice - equity;
            const monthlyInterestRate = interestRate / 12;
            const numberOfPayments = loanTerm * 12;
            
            // ÊúàÈ°çËøîÊ∏àÈ°çÔºàÂÖÉÂà©ÂùáÁ≠âËøîÊ∏àÔºâ
            let monthlyPayment = 0;
            if (monthlyInterestRate > 0) {
                monthlyPayment = loanAmount * (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, numberOfPayments)) / 
                                 (Math.pow(1 + monthlyInterestRate, numberOfPayments) - 1);
            } else {
                monthlyPayment = loanAmount / numberOfPayments;
            }

            // Âπ¥ÈñìÂèéÊîØË®àÁÆó
            const annualRentGross = monthlyRent * 12;
            const annualRentNet = annualRentGross * (1 - vacancyRate);
            const annualManagementFee = annualRentNet * managementFeeRate;
            const annualRepair = repairReserve * 12;
            const annualLoanPayment = monthlyPayment * 12;
            const annualExpenses = annualManagementFee + propertyTax + annualRepair + annualLoanPayment;
            const annualNetIncome = annualRentNet - annualExpenses;

            // Âà©Âõû„ÇäË®àÁÆó
            const grossYield = (annualRentGross / purchasePrice) * 100;
            const netYield = (annualNetIncome / equity) * 100;
            const paybackPeriod = equity / annualNetIncome;

            // ÁµêÊûú„ÅÆË°®Á§∫
            document.getElementById('resultEquity').textContent = `${equity.toFixed(0)}‰∏áÂÜÜ`;
            document.getElementById('resultLoan').textContent = `${loanAmount.toFixed(0)}‰∏áÂÜÜ`;
            document.getElementById('resultMonthlyPayment').textContent = `${(monthlyPayment / 10000).toFixed(1)}‰∏áÂÜÜ`;
            document.getElementById('resultAnnualRent').textContent = `${annualRentNet.toFixed(0)}‰∏áÂÜÜ`;
            document.getElementById('resultAnnualExpense').textContent = `${annualExpenses.toFixed(0)}‰∏áÂÜÜ`;
            document.getElementById('resultNetIncome').textContent = `${annualNetIncome.toFixed(0)}‰∏áÂÜÜ`;
            document.getElementById('resultGrossYield').textContent = `${grossYield.toFixed(2)}%`;
            document.getElementById('resultNetYield').textContent = `${netYield.toFixed(2)}%`;
            document.getElementById('resultPayback').textContent = `${Math.abs(paybackPeriod).toFixed(1)}Âπ¥`;

            // „Ç≠„É£„ÉÉ„Ç∑„É•„Éï„É≠„ÉºË°®„ÅÆÁîüÊàê
            const cashflowTable = document.getElementById('cashflowTable');
            cashflowTable.innerHTML = '';
            let cumulativeIncome = 0;

            for (let year = 1; year <= simulationYears; year += (simulationYears > 10 ? 5 : 1)) {
                // ÁµåÂπ¥„Å´„Çà„ÇãË≥ÉÊñô‰∏ãËêΩ„ÇíËÄÉÊÖÆÔºàÂπ¥1%‰∏ãËêΩ„Å®‰ªÆÂÆöÔºâ
                const rentDeclineRate = Math.pow(0.99, year - 1);
                const yearRent = annualRentNet * rentDeclineRate;
                const yearExpenses = annualExpenses;
                const yearNetIncome = yearRent - yearExpenses;
                cumulativeIncome += yearNetIncome;

                const row = cashflowTable.insertRow();
                row.innerHTML = `
                    <td>${year}Âπ¥ÁõÆ</td>
                    <td style="text-align: right;">${yearRent.toFixed(0)}‰∏áÂÜÜ</td>
                    <td style="text-align: right;">${yearExpenses.toFixed(0)}‰∏áÂÜÜ</td>
                    <td style="text-align: right; color: ${yearNetIncome >= 0 ? '#38a169' : '#e53e3e'};">
                        ${yearNetIncome.toFixed(0)}‰∏áÂÜÜ
                    </td>
                    <td style="text-align: right; font-weight: bold; color: ${cumulativeIncome >= 0 ? '#38a169' : '#e53e3e'};">
                        ${cumulativeIncome.toFixed(0)}‰∏áÂÜÜ
                    </td>
                `;
            }

            document.getElementById('simulationResults').style.display = 'block';
        }

        function resetSimulationForm() {
            // „Éï„Ç©„Éº„É†„Çí„Éá„Éï„Ç©„É´„ÉàÂÄ§„Å´„É™„Çª„ÉÉ„Éà
            document.getElementById('purchasePrice').value = 68000;
            document.getElementById('downPayment').value = 25;
            document.getElementById('interestRate').value = 1.2;
            document.getElementById('loanTerm').value = 30;
            document.getElementById('monthlyRent').value = 360;
            document.getElementById('vacancyRate').value = 5;
            document.getElementById('managementFee').value = 5;
            document.getElementById('propertyTax').value = 120;
            document.getElementById('repairReserve').value = 10;
            document.getElementById('simulationYears').value = 10;
            
            // ÁµêÊûú„Ç®„É™„Ç¢„ÇíÈùûË°®Á§∫
            document.getElementById('simulationResults').style.display = 'none';
        }

        function downloadSimulation() {
            alert('PRISMÊäïË≥áÂàÜÊûê„É¨„Éù„Éº„ÉàÔºàExcelÂΩ¢ÂºèÔºâ„ÅÆ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÇíÈñãÂßã„Åó„Åæ„Åô„ÄÇ\nË©≥Á¥∞„Å™ÂèéÊîØ‰∫àÊ∏¨„Å®ÊÑüÂ∫¶ÂàÜÊûê„ÇíÂê´„ÇÄ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„É¨„Éù„Éº„Éà„Åß„Åô„ÄÇ');
            // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Çµ„Éº„Éê„Éº„Çµ„Ç§„Éâ„ÅßExcel„Éï„Ç°„Ç§„É´„ÇíÁîüÊàê
        }

        function saveSimulation() {
            alert('„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÁµêÊûú„Çí„Éû„Ç§„Éù„Éº„Éà„Éï„Ç©„É™„Ç™„Å´‰øùÂ≠ò„Åó„Åæ„Åó„Åü„ÄÇ\n‰ªñ„ÅÆÁâ©‰ª∂„Å®„ÅÆÊØîËºÉÂàÜÊûê„ÅåÂèØËÉΩ„Å´„Å™„Çä„Åæ„Åô„ÄÇ');
            // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅ„Éá„Éº„Çø„Éô„Éº„Çπ„Å´‰øùÂ≠ò
        }

        function requestConsultation() {
            alert('PRISMÂ∞ÇÈñÄ„Ç¢„Éâ„Éê„Ç§„Ç∂„Éº„Å∏„ÅÆÁõ∏Ë´áÁî≥Ë´ã„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇ\n24ÊôÇÈñì‰ª•ÂÜÖ„Å´ÊäïË≥áÊà¶Áï•„ÅÆ„ÅîÊèêÊ°à„Çí„Åï„Åõ„Å¶„ÅÑ„Åü„Å†„Åç„Åæ„Åô„ÄÇ');
            // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ„ÄÅÂïè„ÅÑÂêà„Çè„Åõ„Éï„Ç©„Éº„É†„Å∏ÈÅ∑Áßª
        }

        // „É¢„Éº„ÉÄ„É´„ÅÆÂ§ñÂÅ¥„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.onclick = function(event) {
            const modal = document.getElementById('customSimModal');
            if (event.target == modal) {
                closeCustomSimulation();
            }
        }
        
        // ÁÆ°ÁêÜËÄÖ„É¢„Éº„Éâ„ÅÆÂàáÊõø
        function toggleAdminMode() {
            isAdminMode = !isAdminMode;
            const adminPanel = document.getElementById('adminPanel');
            const adminBtn = document.getElementById('adminToggle');
            
            if (isAdminMode) {
                adminPanel.style.display = 'block';
                adminBtn.style.background = '#3182ce';
                adminBtn.innerHTML = 'üîß ÁÆ°ÁêÜËÄÖ„É¢„Éº„ÉâÔºàONÔºâ';
            } else {
                adminPanel.style.display = 'none';
                adminBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                adminBtn.innerHTML = 'üîß ÁÆ°ÁêÜËÄÖ„É¢„Éº„Éâ';
            }
        }
        
        // „Çπ„ÉÜ„Éº„Ç∏Ë®≠ÂÆöÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function setStage(stage) {
            currentStage = stage;
            updateStageIndicator();
            unlockContent();
            
            // „Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.stage-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ÁÆ°ÁêÜËÄÖÊÉÖÂ†±„ÇíÊõ¥Êñ∞
            document.getElementById('currentStageInfo').textContent = `„Çπ„ÉÜ„Éº„Ç∏${stage}`;
            
            // Ë©≤ÂΩì„Åô„Çã„Çø„Éñ„ÇíË°®Á§∫
            if (stage === 1) showTab('overview', 1);
            else if (stage === 2) showTab('simulation', 2);
            else if (stage === 3) loadAndShowTab('valuation', 3);
            else if (stage === 4) loadAndShowTab('finance', 4);
            else if (stage === 5) loadAndShowTab('summary', 5);
        }
        
        // È°ßÂÆ¢„Çø„Ç§„ÉóÂ§âÊõ¥ÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function changeCustomerType() {
            const customerType = document.getElementById('customerType').value;
            const customerNames = {
                'new': 'Êñ∞Ë¶èÈ°ßÂÆ¢ÔºàÁî∞‰∏≠ÊßòÔºâ',
                'interested': 'Èñ¢ÂøÉÈ°ßÂÆ¢ÔºàÈà¥Êú®ÊßòÔºâ',
                'serious': 'Êú¨Ê†ºÊ§úË®éÔºàÂ±±Áî∞ÊßòÔºâ',
                'negotiating': 'ÂïÜË´á‰∏≠Ôºà‰ΩêËó§ÊßòÔºâ',
                'closing': 'ÊàêÁ¥ÑÂâçÔºàÈ´òÊ©ãÊßòÔºâ'
            };
            
            const stageMap = {
                'new': 1,
                'interested': 2,
                'serious': 3,
                'negotiating': 4,
                'closing': 5
            };
            
            document.getElementById('currentCustomer').textContent = customerNames[customerType];
            setStage(stageMap[customerType]);
        }
        
        // ÂÖ®Ë≥áÊñô„Ç¢„É≥„É≠„ÉÉ„ÇØÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function unlockAll() {
            currentStage = 5;
            updateStageIndicator();
            unlockContent();
            loadAllContent();
            alert('ÂÖ®„Å¶„ÅÆË≥áÊñô„Åå„Ç¢„É≥„É≠„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü„ÄÇ');
        }
        
        // „É™„Çª„ÉÉ„ÉàÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function resetAll() {
            currentStage = 2;
            updateStageIndicator();
            resetContent();
            showTab('overview', 1);
            document.getElementById('customerType').value = 'interested';
            alert('ÂàùÊúüÁä∂ÊÖãÔºà„Çπ„ÉÜ„Éº„Ç∏2Ôºâ„Å´„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åó„Åü„ÄÇ');
        }
        
        // „Ç¢„Éä„É™„ÉÜ„Ç£„ÇØ„ÇπË°®Á§∫ÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function showAnalytics() {
            const statsDiv = document.getElementById('adminStats');
            if (statsDiv.style.display === 'none') {
                statsDiv.style.display = 'grid';
            } else {
                statsDiv.style.display = 'none';
            }
        }
        
        // „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆ„É™„Çª„ÉÉ„Éà
        function resetContent() {
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach((tab, index) => {
                if (index > 1) {
                    tab.classList.add('locked');
                }
            });
            
            // „É≠„ÉÉ„ÇØÁîªÈù¢„ÇíÂÜçË®≠ÂÆö
            document.querySelector('#valuation .section-card').innerHTML = getLockedContent('‰æ°Ê†ºÊüªÂÆöÂàÜÊûê', 'PRISMÁã¨Ëá™„ÅÆ3ÊâãÊ≥ï„Å´„Çà„ÇãË©≥Á¥∞„Å™‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ<br>„Ç®„É™„Ç¢Áõ∏Â†¥„Å®„ÅÆÊØîËºÉ„ÄÅÊäïË≥áÂ¶•ÂΩìÊÄß„ÅÆÂà§ÂÆöÁµêÊûú„ÇíÂê´„Åø„Åæ„Åô„ÄÇ', 3);
            document.querySelector('#finance .section-card').innerHTML = getLockedContent('ËûçË≥áË®àÁîªË©≥Á¥∞', 'ÊèêÊê∫ÈáëËûçÊ©üÈñ¢„ÅÆËûçË≥áÊù°‰ª∂„ÄÅÂøÖË¶ÅÂ±ûÊÄß„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ<br>ÈäÄË°åË©ï‰æ°È°ç‰∫àÊ∏¨„Å™„Å©„ÄÅËûçË≥áÂÆüÁèæ„Å´Âêë„Åë„ÅüË©≥Á¥∞ÊÉÖÂ†±„Çí„ÅîÊèê‰æõ„Åó„Åæ„Åô„ÄÇ', 4);
            document.querySelector('#summary .section-card').innerHTML = getLockedContent('ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº', 'Á∑èÂêàË©ï‰æ°„ÄÅ„É™„Çπ„ÇØÂàÜÊûê„ÄÅÊäïË≥á„Çπ„Ç±„Ç∏„É•„Éº„É´Á≠â„ÄÅ<br>ÊúÄÁµÇÁöÑ„Å™ÊäïË≥áÂà§Êñ≠„Å´ÂøÖË¶Å„Å™ÂÖ®ÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„Åü„É¨„Éù„Éº„Éà„Åß„Åô„ÄÇ', 5);
            document.querySelector('#documents .section-card').innerHTML = getLockedContent('Â•ëÁ¥ÑÈñ¢ÈÄ£Êõ∏È°û‰∏ÄÂºè', 'ÈáçË¶Å‰∫ãÈ†ÖË™¨ÊòéÊõ∏„ÄÅÂ£≤Ë≤∑Â•ëÁ¥ÑÊõ∏Ê°à„ÄÅÁôªË®òÈñ¢ÈÄ£Êõ∏È°ûÁ≠â„ÄÅ<br>Â•ëÁ¥Ñ„Å´ÂøÖË¶Å„Å™ÂÖ®„Å¶„ÅÆÊõ∏È°û„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ', 5);
        }
        
        // „É≠„ÉÉ„ÇØ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅÆHTMLÁîüÊàê
        function getLockedContent(title, description, stage) {
            return `
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">${title}</h2>
                        <p class="locked-description">${description}</p>
                        <button class="unlock-button" onclick="requestUnlock(${stage})">
                            ${stage === 3 ? '„Ç¢„É≥„É≠„ÉÉ„ÇØ„ÇíÁî≥Ë´ã„Åô„Çã' : 
                              stage === 4 ? 'ÂïÜË´á„ÇíÁî≥„ÅóËæº„ÇÄ' : 
                              'ÊúÄÁµÇÊ§úË®éÊÆµÈöé„Å∏ÈÄ≤„ÇÄ'}
                        </button>
                    </div>
                </div>
            `;
        }
        
        // ÂÖ®„Ç≥„É≥„ÉÜ„É≥„ÉÑË™≠„ÅøËæº„ÅøÔºàÁÆ°ÁêÜËÄÖÁî®Ôºâ
        function loadAllContent() {
            loadStageContent(3);
            loadStageContent(4);
            loadStageContent(5);
        }
        
        // „Çø„ÉñË°®Á§∫„Å®ÂÜÖÂÆπË™≠„ÅøËæº„Åø
        function loadAndShowTab(tabId, stage) {
            loadStageContent(stage);
            showTab(tabId, stage);
        }
        
        function showTab(tabId, requiredStage) {
            // ÂøÖË¶Å„Å™„Çπ„ÉÜ„Éº„Ç∏„Å´ÈÅî„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
            if (requiredStage && requiredStage > currentStage && !isAdminMode) {
                showLockedMessage(requiredStage);
                return;
            }
            
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
            
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Éú„Çø„É≥„Åã„Çâ active „ÇØ„É©„Çπ„ÇíÂâäÈô§
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            document.getElementById(tabId).classList.add('active');
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Éú„Çø„É≥„Å´ active „ÇØ„É©„Çπ„ÇíËøΩÂä†
            const activeTab = Array.from(tabs).find(tab => 
                tab.textContent.includes(getTabTitle(tabId))
            );
            if (activeTab && !activeTab.classList.contains('locked')) {
                activeTab.classList.add('active');
            }
            
            // „Éö„Éº„Ç∏„Éà„ÉÉ„Éó„Å´„Çπ„ÇØ„É≠„Éº„É´
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function getTabTitle(tabId) {
            const titles = {
                'overview': 'Áâ©‰ª∂Ê¶ÇË¶Å',
                'simulation': 'ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥',
                'valuation': '‰æ°Ê†ºÊüªÂÆö',
                'finance': 'ËûçË≥áË®àÁîª',
                'summary': 'ÊäïË≥áÂà§Êñ≠',
                'documents': 'ÂøÖË¶ÅÊõ∏È°û'
            };
            return titles[tabId] || '';
        }
        
        function showLockedMessage(requiredStage) {
            const messages = {
                3: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åè„Å´„ÅØ„ÄÅË©≥Á¥∞Ê§úË®éÊÆµÈöé„Å∏„ÅÆÁßªË°å„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ',
                4: 'ËûçË≥áË®àÁîª„ÅÆË©≥Á¥∞„ÅØ„ÄÅÂïÜË´áÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                5: 'ÊúÄÁµÇË≥áÊñô„ÅØ„ÄÅÂ•ëÁ¥ÑÂâç„ÅÆÊúÄÁµÇÁ¢∫Ë™çÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ'
            };
            
            alert(messages[requiredStage] || '„Åì„ÅÆÊÉÖÂ†±„ÅØÊ¨°„ÅÆÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ');
        }
        
        function requestUnlock(stage) {
            const actions = {
                3: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÅÆ„Ç¢„É≥„É≠„ÉÉ„ÇØÁî≥Ë´ã„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇÊãÖÂΩìËÄÖ„Çà„ÇäÈÄ£Áµ°„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                4: 'ÂïÜË´á„ÅÆ„ÅäÁî≥„ÅóËæº„Åø„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇÊó•Á®ãË™øÊï¥„ÅÆ„ÅîÈÄ£Áµ°„Çí„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                5: 'ÊúÄÁµÇÊ§úË®éÊÆµÈöé„Å∏„ÅÆÁßªË°å„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„Åü„ÄÇÂÖ®Ë≥áÊñô„ÇíÊ∫ñÂÇô„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ'
            };
            
            alert(actions[stage]);
            // ÂÆüÈöõ„Å´„ÅØ„Åì„Åì„ÅßAPI„Ç≥„Éº„É´„Å™„Å©„ÇíË°å„ÅÜ
        }
        
        function advanceStage() {
            if (currentStage < 5) {
                currentStage++;
                updateStageIndicator();
                unlockContent();
                alert(`„Çπ„ÉÜ„Éº„Ç∏${currentStage}„Å´ÈÄ≤„Åø„Åæ„Åó„Åü„ÄÇÊñ∞„Åó„ÅÑÊÉÖÂ†±„Åå„Ç¢„É≥„É≠„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü„ÄÇ`);
            }
        }
        
        function updateStageIndicator() {
            // „Çπ„ÉÜ„Éº„Ç∏„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº„ÇíÊõ¥Êñ∞
            const stageItems = document.querySelectorAll('.stage-item');
            stageItems.forEach((item, index) => {
                if (index < currentStage - 1) {
                    item.classList.add('completed');
                    item.classList.remove('current');
                } else if (index === currentStage - 1) {
                    item.classList.add('current');
                    item.classList.remove('completed');
                } else {
                    item.classList.remove('completed', 'current');
                }
            });
            
            // „Çπ„ÉÜ„Éº„Ç∏Ë™¨Êòé„ÇíÊõ¥Êñ∞
            const descriptions = {
                1: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏1ÔºöÂàùÂõûÊé•Ëß¶',
                    desc: 'Áâ©‰ª∂„ÅÆÂü∫Êú¨ÊÉÖÂ†±„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„ÅèÊÆµÈöé„Åß„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å',
                    next: 'ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥'
                },
                2: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏2ÔºöÈñ¢ÂøÉË°®Êòé',
                    desc: 'Áâ©‰ª∂Ê¶ÇË¶Å„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åç„ÄÅ„Çà„ÇäË©≥Á¥∞„Å™ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„ÇãÊÆµÈöé„Åß„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥',
                    next: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÄÅËûçË≥áË®àÁîªË©≥Á¥∞'
                },
                3: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏3ÔºöË©≥Á¥∞Ê§úË®é',
                    desc: 'PRISMÁã¨Ëá™„ÅÆ‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Å´„Çà„Çä„ÄÅÊäïË≥áÂà§Êñ≠„ÅÆÊùêÊñô„Çí„ÅîÊèê‰æõ„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ‰æ°Ê†ºÊüªÂÆö',
                    next: 'ËûçË≥áË®àÁîªË©≥Á¥∞„ÄÅÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº'
                },
                4: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏4ÔºöÂïÜË´á',
                    desc: 'ËûçË≥áË®àÁîª„ÇíÂê´„ÇÄÂÖ∑‰ΩìÁöÑ„Å™ÊäïË≥á„Éó„É©„É≥„Çí„ÅîÊèêÊ°à„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ‰æ°Ê†ºÊüªÂÆö„ÄÅËûçË≥áË®àÁîª',
                    next: 'ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº„ÄÅÂ•ëÁ¥ÑÊõ∏È°û'
                },
                5: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏5ÔºöÊúÄÁµÇÁ¢∫Ë™ç',
                    desc: 'ÂÖ®„Å¶„ÅÆÊÉÖÂ†±„ÇíÈñãÁ§∫„Åó„ÄÅÊúÄÁµÇÁöÑ„Å™ÊäïË≥áÂà§Êñ≠„Çí„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'ÂÖ®Ë≥áÊñô',
                    next: 'Â•ëÁ¥ÑÊâãÁ∂ö„Åç„Å∏'
                }
            };
            
            const stageDesc = descriptions[currentStage];
            if (stageDesc) {
                document.querySelector('.stage-description').innerHTML = `
                    <h3>${stageDesc.title}</h3>
                    <p>${stageDesc.desc}</p>
                    <p style="margin-top: 10px;"><strong>„Ç¢„É≥„É≠„ÉÉ„ÇØÊ∏à„ÅøÔºö</strong>${stageDesc.unlocked}</p>
                    <p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„ÅßÈñãÁ§∫Ôºö</strong>${stageDesc.next}</p>
                `;
            }
        }
        
        function unlockContent() {
            const tabs = document.querySelectorAll('.nav-tab');
            const unlockMap = {
                1: [0],              // „Çπ„ÉÜ„Éº„Ç∏1: Áâ©‰ª∂Ê¶ÇË¶Å„ÅÆ„Åø
                2: [0, 1],           // „Çπ„ÉÜ„Éº„Ç∏2: Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
                3: [0, 1, 2],        // „Çπ„ÉÜ„Éº„Ç∏3: Ôºã‰æ°Ê†ºÊüªÂÆö
                4: [0, 1, 2, 3],     // „Çπ„ÉÜ„Éº„Ç∏4: ÔºãËûçË≥áË®àÁîª
                5: [0, 1, 2, 3, 4, 5] // „Çπ„ÉÜ„Éº„Ç∏5: ÂÖ®„Å¶
            };
            
            tabs.forEach((tab, index) => {
                if (unlockMap[currentStage] && unlockMap[currentStage].includes(index)) {
                    tab.classList.remove('locked');
                } else if (!isAdminMode) {
                    tab.classList.add('locked');
                }
            });
        }
        
        // „Çπ„ÉÜ„Éº„Ç∏„Åî„Å®„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑË°®Á§∫
        function loadStageContent(stage) {
            if (stage >= 3) {
                // ‰æ°Ê†ºÊüªÂÆö„ÅÆ„É≠„ÉÉ„ÇØ„ÇíËß£Èô§„Åó„Å¶ÂÆü„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
                document.querySelector('#valuation .section-card').innerHTML = `
                    <h2 class="section-title">3. PRISMÁã¨Ëá™‰æ°Ê†ºÊüªÂÆöÂàÜÊûê</h2>
                    <h3 class="subsection-title">ÊüªÂÆöÁµêÊûú„Çµ„Éû„É™„Éº</h3>
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-label">Â£≤Âá∫‰æ°Ê†º</div>
                            <div class="kpi-value">6.8</div>
                            <div class="kpi-unit">ÂÑÑÂÜÜ</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">PRISMÊüªÂÆö‰æ°Ê†º</div>
                            <div class="kpi-value">7.2</div>
                            <div class="kpi-unit">ÂÑÑÂÜÜ</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">‰æ°Ê†ºÂ¶•ÂΩìÊÄß</div>
                            <div class="kpi-value" style="color: #38a169;">ÂÑ™ËâØ</div>
                            <div class="kpi-unit">Ââ≤ÂÆâÂà§ÂÆö</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">ÊäïË≥áÊé®Â•®Â∫¶</div>
                            <div class="kpi-value">S</div>
                            <div class="kpi-unit">ÊúÄÂÑ™ÂÖàÊé®Â•®</div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="advanceStage()">ËûçË≥áË®àÁîª„ÇíÁ¢∫Ë™ç„Åô„Çã</button>
                    </div>
                `;
            }
            
            if (stage >= 4) {
                // ËûçË≥áË®àÁîª„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ
                document.querySelector('#finance .section-card').innerHTML = `
                    <h2 class="section-title">4. ËûçË≥áË®àÁîª„ÉªÈäÄË°åË©ï‰æ°„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</h2>
                    <h3 class="subsection-title">Êé®Â•®ËûçË≥á„Éó„É©„É≥</h3>
                    <div class="property-overview">
                        <div class="info-box">
                            <h4>ËûçË≥áÈáëÈ°ç</h4>
                            <span class="highlight-number">5.1ÂÑÑÂÜÜ</span>
                            <p>ËûçË≥áÊØîÁéáÔºö75%</p>
                        </div>
                        <div class="info-box">
                            <h4>Ëá™Â∑±Ë≥áÈáë</h4>
                            <span class="highlight-number">1.8ÂÑÑÂÜÜ</span>
                            <p>È†≠ÈáëÔºãË´∏Ë≤ªÁî®</p>
                        </div>
                        <div class="info-box">
                            <h4>ÊÉ≥ÂÆöÈáëÂà©</h4>
                            <span class="highlight-number">1.2%</span>
                            <p>Â§âÂãïÈáëÂà©ÔºàÂÑ™ÈÅáÈÅ©Áî®Ôºâ</p>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="advanceStage()">ÊúÄÁµÇÁ¢∫Ë™ç„Å∏ÈÄ≤„ÇÄ</button>
                    </div>
                `;
            }
            
            if (stage >= 5) {
                // ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ
                document.querySelector('#summary .section-card').innerHTML = `
                    <h2 class="section-title">5. ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº</h2>
                    <div style="background: #eff6ff; padding: 30px; text-align: center; margin: 20px 0;">
                        <h2 style="color: #1a365d; margin-bottom: 20px;">PRISMÊäïË≥áÊé®Â•®Â∫¶</h2>
                        <span style="font-size: 4em; color: #1a365d; font-weight: bold;">S</span>
                        <p style="margin-top: 10px; font-size: 1.2em;">ÊúÄÂÑ™ÂÖàÊé®Â•®</p>
                    </div>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="alert('Â•ëÁ¥ÑÊ∫ñÂÇô„ÇíÈñãÂßã„Åó„Åæ„Åô')">Â•ëÁ¥ÑÊ∫ñÂÇô„Å∏ÈÄ≤„ÇÄ</button>
                    </div>
                `;
                
                // ÂøÖË¶ÅÊõ∏È°û„ÅÆ„Ç≥„É≥„ÉÜ„É≥„ÉÑ
                document.querySelector('#documents .section-card').innerHTML = `
                    <h2 class="section-title">6. „ÅîÊèê‰æõË≥áÊñô‰∏ÄË¶ß</h2>
                    <h3 class="subsection-title">„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÂèØËÉΩË≥áÊñô</h3>
                    <ul class="checklist">
                        <li>Áâ©‰ª∂Ê¶ÇË¶ÅÊõ∏ÔºàË©≥Á¥∞ÁâàÔºâ</li>
                        <li>PRISM‰æ°ÂÄ§Ë©ï‰æ°„É¨„Éù„Éº„ÉàÔºà30„Éö„Éº„Ç∏Ôºâ</li>
                        <li>10Âπ¥ÈñìÂèéÊîØ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥ÔºàExcelÔºâ</li>
                        <li>ÈáçË¶Å‰∫ãÈ†ÖË™¨ÊòéÊõ∏ÔºàÊ°àÔºâ</li>
                        <li>Â£≤Ë≤∑Â•ëÁ¥ÑÊõ∏ÔºàÊ°àÔºâ</li>
                    </ul>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="alert('Ë≥áÊñô„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ')">ÂÖ®Ë≥áÊñô„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ</button>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>