<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹ - æŠ•è³‡å®¶å‘ã‘æ®µéšçš„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ </title>
    <link rel="stylesheet" href="/assets/css/common.css">
    <style>
        .member-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            color: white;
            padding: 20px 0;
            box-shadow: var(--shadow-sm);
        }

        .member-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .member-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .member-name {
            font-weight: 600;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            height: 32px;
        }

        .logo img {
            height: 100%;
            width: auto;
            filter: brightness(0) invert(1);
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .breadcrumb {
            padding: 20px 0;
            font-size: 0.9em;
            color: var(--gray-500);
        }

        .breadcrumb a {
            color: var(--primary-light);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* æ®µéšçš„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’common.cssãƒ™ãƒ¼ã‚¹ã§èª¿æ•´ */
        .stage-indicator {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .stage-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stage-item {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 10px;
        }

        .stage-item:not(:last-child):after {
            content: '';
            position: absolute;
            top: 35px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--gray-100);
            z-index: 0;
        }

        .stage-item.completed:not(:last-child):after {
            background: var(--success);
        }

        .stage-circle {
            width: 60px;
            height: 60px;
            background: var(--gray-100);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            color: var(--gray-300);
            position: relative;
            z-index: 1;
            border-radius: 50%;
        }

        .stage-item.completed .stage-circle {
            background: var(--success);
            color: white;
        }

        .stage-item.current .stage-circle {
            background: var(--primary-light);
            color: white;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);
        }

        .stage-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
        }

        .stage-item.completed .stage-label {
            color: var(--success);
        }

        .stage-item.current .stage-label {
            color: var(--primary-light);
        }

        .nav-tabs {
            display: flex;
            background: white;
            box-shadow: var(--shadow-sm);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .nav-tab {
            padding: 20px 30px;
            background: white;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray-500);
            white-space: nowrap;
            transition: all 0.2s ease;
            flex-shrink: 0;
            position: relative;
        }

        .nav-tab.locked {
            background: var(--gray-50);
            color: var(--gray-200);
            cursor: not-allowed;
            position: relative;
        }

        .nav-tab.locked:after {
            content: 'ğŸ”’';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
        }

        .nav-tab:not(.locked):hover {
            background: var(--gray-50);
        }

        .nav-tab.active {
            color: var(--primary-dark);
            border-bottom: 3px solid var(--primary-light);
            background: var(--primary-lighter);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .locked-overlay {
            position: relative;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
            border: 2px dashed var(--gray-200);
        }

        .locked-content {
            text-align: center;
            padding: 40px;
        }

        .locked-icon {
            font-size: 4em;
            color: var(--gray-200);
            margin-bottom: 20px;
        }

        .locked-title {
            font-size: 1.5em;
            color: var(--gray-500);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .locked-description {
            color: var(--gray-400);
            margin-bottom: 20px;
        }

        .unlock-button {
            background: linear-gradient(to bottom, var(--primary-light), #2563eb);
            color: white;
            padding: 12px 30px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
        }

        .unlock-button:hover {
            background: #2563eb;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .subsection-title {
            color: var(--primary-dark);
            font-size: 1.5em;
            margin: 25px 0 15px;
            font-weight: 600;
            border-left: 4px solid var(--primary-light);
            padding-left: 15px;
        }

        .property-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-box {
            background: var(--gray-50);
            padding: 20px;
            border-left: 4px solid var(--primary-light);
        }

        .info-box h4 {
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-box p {
            color: var(--gray-500);
            margin: 5px 0;
        }

        .highlight-number {
            font-size: 2.5em;
            color: var(--primary-dark);
            font-weight: 700;
            display: block;
            margin: 10px 0;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .kpi-label {
            color: var(--gray-400);
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .kpi-value {
            color: var(--primary-dark);
            font-size: 2.5em;
            font-weight: 700;
        }

        .kpi-unit {
            color: var(--gray-500);
            font-size: 0.875rem;
            margin-top: 5px;
        }

        .stage-description {
            background: var(--primary-lighter);
            padding: 20px;
            margin-top: 20px;
        }

        .stage-description h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .action-buttons {
            text-align: center;
            padding: 30px;
            background: var(--gray-50);
            margin-top: 30px;
        }

        .specs-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: var(--shadow-sm);
            margin: 20px 0;
        }

        .specs-table thead {
            background: linear-gradient(to bottom, #edf2f7, #e2e8f0);
        }

        .specs-table th {
            color: var(--gray-600);
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid var(--gray-200);
            letter-spacing: 0.03em;
        }

        .specs-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-100);
            color: var(--gray-500);
        }

        .specs-table tr:hover {
            background: var(--gray-50);
            transition: background 0.2s;
        }

        @media (max-width: 768px) {
            .member-header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .section-card {
                padding: 20px;
            }

            .stage-progress {
                flex-direction: column;
            }

            .stage-item:not(:last-child):after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- ä¼šå“¡ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="member-header">
        <div class="member-header-content">
            <div class="logo">
                <img src="/assets/images/logo/prism-logo-optimized.svg" alt="PRISM">
            </div>
            <div class="member-info">
                <span class="member-name" id="memberName">VIPä¼šå“¡æ§˜</span>
                <a href="/" class="btn-logout" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ -->
        <div class="breadcrumb">
            <a href="/member/">ç‰©ä»¶ä¸€è¦§</a> > PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹
        </div>

        <!-- ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
        <div class="stage-indicator">
            <h2 style="color: var(--primary-dark); margin-bottom: 20px;">ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸</h2>
            <div class="stage-progress">
                <div class="stage-item completed" id="stage1">
                    <div class="stage-circle">1</div>
                    <div class="stage-label">åˆå›æ¥è§¦</div>
                </div>
                <div class="stage-item current" id="stage2">
                    <div class="stage-circle">2</div>
                    <div class="stage-label">é–¢å¿ƒè¡¨æ˜</div>
                </div>
                <div class="stage-item" id="stage3">
                    <div class="stage-circle">3</div>
                    <div class="stage-label">è©³ç´°æ¤œè¨</div>
                </div>
                <div class="stage-item" id="stage4">
                    <div class="stage-circle">4</div>
                    <div class="stage-label">å•†è«‡</div>
                </div>
                <div class="stage-item" id="stage5">
                    <div class="stage-circle">5</div>
                    <div class="stage-label">æœ€çµ‚ç¢ºèª</div>
                </div>
            </div>
            <div class="stage-description">
                <h3>ã‚¹ãƒ†ãƒ¼ã‚¸2ï¼šé–¢å¿ƒè¡¨æ˜</h3>
                <p>ç‰©ä»¶æ¦‚è¦ã‚’ã”ç¢ºèªã„ãŸã ãã€ã‚ˆã‚Šè©³ç´°ãªåç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ã„ãŸã ã‘ã‚‹æ®µéšã§ã™ã€‚</p>
                <p style="margin-top: 10px;"><strong>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯æ¸ˆã¿ï¼š</strong>ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</p>
                <p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§é–‹ç¤ºï¼š</strong>ä¾¡æ ¼æŸ»å®šåˆ†æã€èè³‡è¨ˆç”»è©³ç´°</p>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview', 1)">1. ç‰©ä»¶æ¦‚è¦</button>
            <button class="nav-tab" onclick="showTab('simulation', 2)">2. åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
            <button class="nav-tab locked" onclick="showLockedMessage(3)">3. ä¾¡æ ¼æŸ»å®š</button>
            <button class="nav-tab locked" onclick="showLockedMessage(4)">4. èè³‡è¨ˆç”»</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">6. å¿…è¦æ›¸é¡ä¸€å¼</button>
        </div>

        <!-- 1. ç‰©ä»¶æ¦‚è¦ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸1ã§é–‹ç¤ºï¼‰ -->
        <div id="overview" class="tab-content active">
            <div class="section-card">
                <h2 class="section-title">1. ç‰©ä»¶æ¦‚è¦ãƒ»ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆ†æ</h2>
                
                <h3 class="subsection-title">åŸºæœ¬æƒ…å ±</h3>
                <div class="property-overview">
                    <div class="info-box">
                        <h4>ç‰©ä»¶åç§°</h4>
                        <p>PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹</p>
                        <p>æ±äº¬éƒ½æ¸¯åŒºå—é’å±±5-12-8</p>
                    </div>
                    <div class="info-box">
                        <h4>ç‰©ä»¶ã‚¿ã‚¤ãƒ—</h4>
                        <p>RCé€  ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‚ºãƒãƒ³ã‚·ãƒ§ãƒ³</p>
                        <p>ç¯‰å¹´æœˆï¼š2020å¹´3æœˆç«£å·¥</p>
                    </div>
                    <div class="info-box">
                        <h4>ç‰©ä»¶ä¾¡æ ¼</h4>
                        <span class="highlight-number">6.8å„„å††</span>
                        <p>è¡¨é¢åˆ©å›ã‚Šï¼š6.35%</p>
                    </div>
                </div>

                <h3 class="subsection-title">ç«‹åœ°è©•ä¾¡</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>è©•ä¾¡é …ç›®</th>
                            <th>å†…å®¹</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æœ€å¯„é§…</td>
                            <td>æ±äº¬ãƒ¡ãƒˆãƒ­ã€Œè¡¨å‚é“ã€é§… å¾’æ­©6åˆ† / ã€Œæ¸‹è°·ã€é§… å¾’æ­©12åˆ†</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                        <tr>
                            <td>éƒ½å¿ƒã‚¢ã‚¯ã‚»ã‚¹</td>
                            <td>éŠ€åº§ç·šãƒ»åŠè”µé–€ç·šãƒ»åƒä»£ç”°ç·šåˆ©ç”¨å¯ã€ä¸»è¦é§…ç›´é€š</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                        <tr>
                            <td>å‘¨è¾ºç’°å¢ƒ</td>
                            <td>é’å±±é€šã‚Šæ²¿ã„ã€é«˜ç´šãƒ–ãƒ©ãƒ³ãƒ‰åº—ãƒ»é£²é£Ÿåº—é›†ç©ã‚¨ãƒªã‚¢</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="subsection-title">è¿‘éš£è³ƒè²¸å¸‚å ´åˆ†æ</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">ã‚¨ãƒªã‚¢å¹³å‡è³ƒæ–™</div>
                        <div class="kpi-value">28.5</div>
                        <div class="kpi-unit">ä¸‡å††/æœˆï¼ˆ1LDKï¼‰</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ç©ºå®¤ç‡</div>
                        <div class="kpi-value">2.8</div>
                        <div class="kpi-unit">%ï¼ˆæ¸¯åŒºå¹³å‡ï¼‰</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ç«¶åˆç‰©ä»¶æ•°</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-unit">æ£Ÿï¼ˆåŠå¾„500mï¼‰</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="advanceStage()">è©³ç´°æƒ…å ±ã‚’å¸Œæœ›ã™ã‚‹</button>
                    <button class="btn btn-primary" onclick="requestConsultation()">è³ªå•ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- 2. åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸2ã§é–‹ç¤ºï¼‰ -->
        <div id="simulation" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">2. æŠ•è³‡åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                
                <h3 class="subsection-title">æŠ•è³‡æ¦‚è¦</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">ç‰©ä»¶ä¾¡æ ¼</div>
                        <div class="kpi-value">6.8</div>
                        <div class="kpi-unit">å„„å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">æƒ³å®šå¹´é–“è³ƒæ–™</div>
                        <div class="kpi-value">4,320</div>
                        <div class="kpi-unit">ä¸‡å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">è¡¨é¢åˆ©å›ã‚Š</div>
                        <div class="kpi-value">6.35</div>
                        <div class="kpi-unit">%</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">å®Ÿè³ªåˆ©å›ã‚Š</div>
                        <div class="kpi-value">5.28</div>
                        <div class="kpi-unit">%</div>
                    </div>
                </div>

                <h3 class="subsection-title">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼äºˆæ¸¬ï¼ˆå¹´é–“ï¼‰</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>1å¹´ç›®</th>
                            <th>5å¹´ç›®</th>
                            <th>10å¹´ç›®</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>è³ƒæ–™åå…¥</td>
                            <td style="text-align: right;">4,320ä¸‡å††</td>
                            <td style="text-align: right;">4,320ä¸‡å††</td>
                            <td style="text-align: right;">4,200ä¸‡å††</td>
                        </tr>
                        <tr>
                            <td>ç®¡ç†è²»ãƒ»ä¿®ç¹•è²»</td>
                            <td style="text-align: right;">-432ä¸‡å††</td>
                            <td style="text-align: right;">-450ä¸‡å††</td>
                            <td style="text-align: right;">-480ä¸‡å††</td>
                        </tr>
                        <tr>
                            <td>ãƒ­ãƒ¼ãƒ³è¿”æ¸ˆï¼ˆæƒ³å®šï¼‰</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                        </tr>
                        <tr style="background: var(--primary-lighter);">
                            <td><strong>ç´”åç›Šï¼ˆç¨å‰ï¼‰</strong></td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,662ä¸‡å††</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,650ä¸‡å††</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,505ä¸‡å††</td>
                        </tr>
                    </tbody>
                </table>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="advanceStage()">ä¾¡æ ¼æŸ»å®šã‚’ç¢ºèªã™ã‚‹</button>
                    <button class="btn btn-primary" onclick="requestConsultation()">å°‚é–€å®¶ã«ç›¸è«‡ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- 3. ä¾¡æ ¼æŸ»å®šï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸3ã§é–‹ç¤ºï¼‰ -->
        <div id="valuation" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">ä¾¡æ ¼æŸ»å®šåˆ†æ</h2>
                        <p class="locked-description">
                            PRISMç‹¬è‡ªã®3æ‰‹æ³•ã«ã‚ˆã‚‹è©³ç´°ãªä¾¡æ ¼æŸ»å®šåˆ†æã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚<br>
                            ã‚¨ãƒªã‚¢ç›¸å ´ã¨ã®æ¯”è¼ƒã€æŠ•è³‡å¦¥å½“æ€§ã®åˆ¤å®šçµæœã‚’å«ã¿ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(3)">
                            ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã‚’ç”³è«‹ã™ã‚‹
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. èè³‡è¨ˆç”»ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸4ã§é–‹ç¤ºï¼‰ -->
        <div id="finance" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">èè³‡è¨ˆç”»è©³ç´°</h2>
                        <p class="locked-description">
                            ææºé‡‘èæ©Ÿé–¢ã®èè³‡æ¡ä»¶ã€å¿…è¦å±æ€§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€<br>
                            éŠ€è¡Œè©•ä¾¡é¡äºˆæ¸¬ãªã©ã€èè³‡å®Ÿç¾ã«å‘ã‘ãŸè©³ç´°æƒ…å ±ã‚’ã”æä¾›ã—ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(4)">
                            å•†è«‡ã‚’ç”³ã—è¾¼ã‚€
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸5ã§é–‹ç¤ºï¼‰ -->
        <div id="summary" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</h2>
                        <p class="locked-description">
                            ç·åˆè©•ä¾¡ã€ãƒªã‚¹ã‚¯åˆ†æã€æŠ•è³‡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç­‰ã€<br>
                            æœ€çµ‚çš„ãªæŠ•è³‡åˆ¤æ–­ã«å¿…è¦ãªå…¨æƒ…å ±ã‚’çµ±åˆã—ãŸãƒ¬ãƒãƒ¼ãƒˆã§ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            æœ€çµ‚æ¤œè¨æ®µéšã¸é€²ã‚€
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. å¿…è¦æ›¸é¡ä¸€å¼ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸5ã§é–‹ç¤ºï¼‰ -->
        <div id="documents" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">å¥‘ç´„é–¢é€£æ›¸é¡ä¸€å¼</h2>
                        <p class="locked-description">
                            é‡è¦äº‹é …èª¬æ˜æ›¸ã€å£²è²·å¥‘ç´„æ›¸æ¡ˆã€ç™»è¨˜é–¢é€£æ›¸é¡ç­‰ã€<br>
                            å¥‘ç´„ã«å¿…è¦ãªå…¨ã¦ã®æ›¸é¡ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã„ãŸã ã‘ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            å¥‘ç´„æº–å‚™ã‚’é–‹å§‹ã™ã‚‹
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
        let currentStage = 2;
        
        function showTab(tabId, requiredStage) {
            // å¿…è¦ãªã‚¹ãƒ†ãƒ¼ã‚¸ã«é”ã—ã¦ã„ãªã„å ´åˆ
            if (requiredStage && requiredStage > currentStage) {
                showLockedMessage(requiredStage);
                return;
            }
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‹ã‚‰ active ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
            document.getElementById(tabId).classList.add('active');
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ãƒœã‚¿ãƒ³ã« active ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            const activeTab = Array.from(tabs).find(tab => 
                tab.textContent.includes(getTabTitle(tabId))
            );
            if (activeTab && !activeTab.classList.contains('locked')) {
                activeTab.classList.add('active');
            }
            
            // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function getTabTitle(tabId) {
            const titles = {
                'overview': 'ç‰©ä»¶æ¦‚è¦',
                'simulation': 'åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
                'valuation': 'ä¾¡æ ¼æŸ»å®š',
                'finance': 'èè³‡è¨ˆç”»',
                'summary': 'æŠ•è³‡åˆ¤æ–­',
                'documents': 'å¿…è¦æ›¸é¡'
            };
            return titles[tabId] || '';
        }
        
        function showLockedMessage(requiredStage) {
            const messages = {
                3: 'ä¾¡æ ¼æŸ»å®šåˆ†æã‚’ã”è¦§ã„ãŸã ãã«ã¯ã€è©³ç´°æ¤œè¨æ®µéšã¸ã®ç§»è¡ŒãŒå¿…è¦ã§ã™ã€‚',
                4: 'èè³‡è¨ˆç”»ã®è©³ç´°ã¯ã€å•†è«‡æ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚',
                5: 'æœ€çµ‚è³‡æ–™ã¯ã€å¥‘ç´„å‰ã®æœ€çµ‚ç¢ºèªæ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚'
            };
            
            alert(messages[requiredStage] || 'ã“ã®æƒ…å ±ã¯æ¬¡ã®æ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚');
        }
        
        function requestUnlock(stage) {
            const actions = {
                3: 'ä¾¡æ ¼æŸ»å®šåˆ†æã®ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ç”³è«‹ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ‹…å½“è€…ã‚ˆã‚Šé€£çµ¡ã„ãŸã—ã¾ã™ã€‚',
                4: 'å•†è«‡ã®ãŠç”³ã—è¾¼ã¿ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ—¥ç¨‹èª¿æ•´ã®ã”é€£çµ¡ã‚’ã„ãŸã—ã¾ã™ã€‚',
                5: 'æœ€çµ‚æ¤œè¨æ®µéšã¸ã®ç§»è¡Œã‚’ç¢ºèªã—ã¾ã—ãŸã€‚å…¨è³‡æ–™ã‚’æº–å‚™ã„ãŸã—ã¾ã™ã€‚'
            };
            
            alert(actions[stage]);
            // å®Ÿéš›ã«ã¯ã“ã“ã§APIã‚³ãƒ¼ãƒ«ãªã©ã‚’è¡Œã†
        }
        
        function advanceStage() {
            if (currentStage < 5) {
                currentStage++;
                updateStageIndicator();
                unlockContent();
                alert(`ã‚¹ãƒ†ãƒ¼ã‚¸${currentStage}ã«é€²ã¿ã¾ã—ãŸã€‚æ–°ã—ã„æƒ…å ±ãŒã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚`);
            }
        }
        
        function updateStageIndicator() {
            // ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ›´æ–°
            const stageItems = document.querySelectorAll('.stage-item');
            stageItems.forEach((item, index) => {
                if (index < currentStage - 1) {
                    item.classList.add('completed');
                    item.classList.remove('current');
                } else if (index === currentStage - 1) {
                    item.classList.add('current');
                    item.classList.remove('completed');
                } else {
                    item.classList.remove('completed', 'current');
                }
            });
            
            // ã‚¹ãƒ†ãƒ¼ã‚¸èª¬æ˜ã‚’æ›´æ–°
            const descriptions = {
                1: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸1ï¼šåˆå›æ¥è§¦',
                    desc: 'ç‰©ä»¶ã®åŸºæœ¬æƒ…å ±ã‚’ã”ç¢ºèªã„ãŸã ãæ®µéšã§ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦',
                    next: 'åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³'
                },
                2: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸2ï¼šé–¢å¿ƒè¡¨æ˜',
                    desc: 'ç‰©ä»¶æ¦‚è¦ã‚’ã”ç¢ºèªã„ãŸã ãã€ã‚ˆã‚Šè©³ç´°ãªåç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ã„ãŸã ã‘ã‚‹æ®µéšã§ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
                    next: 'ä¾¡æ ¼æŸ»å®šåˆ†æã€èè³‡è¨ˆç”»è©³ç´°'
                },
                3: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸3ï¼šè©³ç´°æ¤œè¨',
                    desc: 'PRISMç‹¬è‡ªã®ä¾¡æ ¼æŸ»å®šåˆ†æã«ã‚ˆã‚Šã€æŠ•è³‡åˆ¤æ–­ã®ææ–™ã‚’ã”æä¾›ã—ã¾ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾¡æ ¼æŸ»å®š',
                    next: 'èè³‡è¨ˆç”»è©³ç´°ã€æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼'
                },
                4: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸4ï¼šå•†è«‡',
                    desc: 'èè³‡è¨ˆç”»ã‚’å«ã‚€å…·ä½“çš„ãªæŠ•è³‡ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾¡æ ¼æŸ»å®šã€èè³‡è¨ˆç”»',
                    next: 'æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼ã€å¥‘ç´„æ›¸é¡'
                },
                5: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸5ï¼šæœ€çµ‚ç¢ºèª',
                    desc: 'å…¨ã¦ã®æƒ…å ±ã‚’é–‹ç¤ºã—ã€æœ€çµ‚çš„ãªæŠ•è³‡åˆ¤æ–­ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚',
                    unlocked: 'å…¨è³‡æ–™',
                    next: 'å¥‘ç´„æ‰‹ç¶šãã¸'
                }
            };
            
            const stageDesc = descriptions[currentStage];
            if (stageDesc) {
                document.querySelector('.stage-description').innerHTML = `
                    <h3>${stageDesc.title}</h3>
                    <p>${stageDesc.desc}</p>
                    <p style="margin-top: 10px;"><strong>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯æ¸ˆã¿ï¼š</strong>${stageDesc.unlocked}</p>
                    <p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§é–‹ç¤ºï¼š</strong>${stageDesc.next}</p>
                `;
            }
        }
        
        function unlockContent() {
            const tabs = document.querySelectorAll('.nav-tab');
            const unlockMap = {
                1: [0],              // ã‚¹ãƒ†ãƒ¼ã‚¸1: ç‰©ä»¶æ¦‚è¦ã®ã¿
                2: [0, 1],           // ã‚¹ãƒ†ãƒ¼ã‚¸2: ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                3: [0, 1, 2],        // ã‚¹ãƒ†ãƒ¼ã‚¸3: ï¼‹ä¾¡æ ¼æŸ»å®š
                4: [0, 1, 2, 3],     // ã‚¹ãƒ†ãƒ¼ã‚¸4: ï¼‹èè³‡è¨ˆç”»
                5: [0, 1, 2, 3, 4, 5] // ã‚¹ãƒ†ãƒ¼ã‚¸5: å…¨ã¦
            };
            
            tabs.forEach((tab, index) => {
                if (unlockMap[currentStage] && unlockMap[currentStage].includes(index)) {
                    tab.classList.remove('locked');
                } else {
                    tab.classList.add('locked');
                }
            });
        }

        function requestConsultation() {
            window.open('https://line.me/ti/p/@prism', '_blank');
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
        function logout() {
            sessionStorage.removeItem('prism_user');
            window.location.href = '/';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
            const user = JSON.parse(sessionStorage.getItem('prism_user') || '{}');
            if (user.name) {
                document.getElementById('memberName').textContent = user.name;
            }

            // åˆæœŸçŠ¶æ…‹è¨­å®š
            updateStageIndicator();
            unlockContent();
        });
    </script>
</body>
</html>