<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISMÂçóÈùíÂ±±„Éó„É¨„Éü„Ç¢„É†„É¨„Ç∏„Éá„É≥„Çπ - ÊäïË≥áÂÆ∂Âêë„ÅëÊÆµÈöéÁöÑÊèêÊ°à„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="stylesheet" href="/assets/css/common.css">
    <style>
        .member-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            color: white;
            padding: 20px 0;
            box-shadow: var(--shadow-sm);
        }

        .member-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .member-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .member-name {
            font-weight: 600;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            height: 32px;
        }

        .logo img {
            height: 100%;
            width: auto;
            filter: brightness(0) invert(1);
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .breadcrumb {
            padding: 20px 0;
            font-size: 0.9em;
            color: var(--gray-500);
        }

        .breadcrumb a {
            color: var(--primary-light);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* ÊÆµÈöéÁöÑÊèêÊ°à„Ç∑„Çπ„ÉÜ„É†„ÅÆ„Çπ„Çø„Ç§„É´„Çícommon.css„Éô„Éº„Çπ„ÅßË™øÊï¥ */
        .stage-indicator {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .stage-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stage-item {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 10px;
        }

        .stage-item:not(:last-child):after {
            content: '';
            position: absolute;
            top: 35px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--gray-100);
            z-index: 0;
        }

        .stage-item.completed:not(:last-child):after {
            background: var(--success);
        }

        .stage-circle {
            width: 60px;
            height: 60px;
            background: var(--gray-100);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            color: var(--gray-300);
            position: relative;
            z-index: 1;
            border-radius: 50%;
        }

        .stage-item.completed .stage-circle {
            background: var(--success);
            color: white;
        }

        .stage-item.current .stage-circle {
            background: var(--primary-light);
            color: white;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);
        }

        .stage-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
        }

        .stage-item.completed .stage-label {
            color: var(--success);
        }

        .stage-item.current .stage-label {
            color: var(--primary-light);
        }

        .nav-tabs {
            display: flex;
            background: white;
            box-shadow: var(--shadow-sm);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .nav-tab {
            padding: 20px 30px;
            background: white;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray-500);
            white-space: nowrap;
            transition: all 0.2s ease;
            flex-shrink: 0;
            position: relative;
        }

        .nav-tab.locked {
            background: var(--gray-50);
            color: var(--gray-200);
            cursor: not-allowed;
            position: relative;
        }

        .nav-tab.locked:after {
            content: 'üîí';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
        }

        .nav-tab:not(.locked):hover {
            background: var(--gray-50);
        }

        .nav-tab.active {
            color: var(--primary-dark);
            border-bottom: 3px solid var(--primary-light);
            background: var(--primary-lighter);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .locked-overlay {
            position: relative;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
            border: 2px dashed var(--gray-200);
        }

        .locked-content {
            text-align: center;
            padding: 40px;
        }

        .locked-icon {
            font-size: 4em;
            color: var(--gray-200);
            margin-bottom: 20px;
        }

        .locked-title {
            font-size: 1.5em;
            color: var(--gray-500);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .locked-description {
            color: var(--gray-400);
            margin-bottom: 20px;
        }

        .unlock-button {
            background: linear-gradient(to bottom, var(--primary-light), #2563eb);
            color: white;
            padding: 12px 30px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
        }

        .unlock-button:hover {
            background: #2563eb;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .subsection-title {
            color: var(--primary-dark);
            font-size: 1.5em;
            margin: 25px 0 15px;
            font-weight: 600;
            border-left: 4px solid var(--primary-light);
            padding-left: 15px;
        }

        .property-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-box {
            background: var(--gray-50);
            padding: 20px;
            border-left: 4px solid var(--primary-light);
        }

        .info-box h4 {
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-box p {
            color: var(--gray-500);
            margin: 5px 0;
        }

        .highlight-number {
            font-size: 2.5em;
            color: var(--primary-dark);
            font-weight: 700;
            display: block;
            margin: 10px 0;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .kpi-label {
            color: var(--gray-400);
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .kpi-value {
            color: var(--primary-dark);
            font-size: 2.5em;
            font-weight: 700;
        }

        .kpi-unit {
            color: var(--gray-500);
            font-size: 0.875rem;
            margin-top: 5px;
        }

        .stage-description {
            background: var(--primary-lighter);
            padding: 20px;
            margin-top: 20px;
        }

        .stage-description h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .action-buttons {
            text-align: center;
            padding: 30px;
            background: var(--gray-50);
            margin-top: 30px;
        }

        .specs-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: var(--shadow-sm);
            margin: 20px 0;
        }

        .specs-table thead {
            background: linear-gradient(to bottom, #edf2f7, #e2e8f0);
        }

        .specs-table th {
            color: var(--gray-600);
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid var(--gray-200);
            letter-spacing: 0.03em;
        }

        .specs-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-100);
            color: var(--gray-500);
        }

        .specs-table tr:hover {
            background: var(--gray-50);
            transition: background 0.2s;
        }

        @media (max-width: 768px) {
            .member-header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .section-card {
                padding: 20px;
            }

            .stage-progress {
                flex-direction: column;
            }

            .stage-item:not(:last-child):after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- ‰ºöÂì°„Éò„ÉÉ„ÉÄ„Éº -->
    <header class="member-header">
        <div class="member-header-content">
            <div class="logo">
                <img src="/assets/images/logo/prism-logo-optimized.svg" alt="PRISM">
            </div>
            <div class="member-info">
                <span class="member-name" id="memberName">VIP‰ºöÂì°Êßò</span>
                <a href="/" class="btn-logout" onclick="logout()">„É≠„Ç∞„Ç¢„Ç¶„Éà</a>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- „Éë„É≥„Åè„Åö„É™„Çπ„Éà -->
        <div class="breadcrumb">
            <a href="/member/">Áâ©‰ª∂‰∏ÄË¶ß</a> > PRISMÂçóÈùíÂ±±„Éó„É¨„Éü„Ç¢„É†„É¨„Ç∏„Éá„É≥„Çπ
        </div>

        <!-- „Çπ„ÉÜ„Éº„Ç∏„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
        <div class="stage-indicator">
            <h2 style="color: var(--primary-dark); margin-bottom: 20px;">ÁèæÂú®„ÅÆ„Çπ„ÉÜ„Éº„Ç∏</h2>
            <div class="stage-progress">
                <div class="stage-item completed" id="stage1">
                    <div class="stage-circle">1</div>
                    <div class="stage-label">ÂàùÂõûÊé•Ëß¶</div>
                </div>
                <div class="stage-item current" id="stage2">
                    <div class="stage-circle">2</div>
                    <div class="stage-label">Èñ¢ÂøÉË°®Êòé</div>
                </div>
                <div class="stage-item" id="stage3">
                    <div class="stage-circle">3</div>
                    <div class="stage-label">Ë©≥Á¥∞Ê§úË®é</div>
                </div>
                <div class="stage-item" id="stage4">
                    <div class="stage-circle">4</div>
                    <div class="stage-label">ÂïÜË´á</div>
                </div>
                <div class="stage-item" id="stage5">
                    <div class="stage-circle">5</div>
                    <div class="stage-label">ÊúÄÁµÇÁ¢∫Ë™ç</div>
                </div>
            </div>
            <div class="stage-description">
                <h3>„Çπ„ÉÜ„Éº„Ç∏2ÔºöÈñ¢ÂøÉË°®Êòé</h3>
                <p>Áâ©‰ª∂Ê¶ÇË¶Å„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åç„ÄÅ„Çà„ÇäË©≥Á¥∞„Å™ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„ÇãÊÆµÈöé„Åß„Åô„ÄÇ</p>
                <p style="margin-top: 10px;"><strong>„Ç¢„É≥„É≠„ÉÉ„ÇØÊ∏à„ÅøÔºö</strong>Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</p>
                <p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„ÅßÈñãÁ§∫Ôºö</strong>‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÄÅËûçË≥áË®àÁîªË©≥Á¥∞</p>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview', 1)">1. Áâ©‰ª∂Ê¶ÇË¶Å</button>
            <button class="nav-tab" onclick="showTab('simulation', 2)">2. ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</button>
            <button class="nav-tab locked" onclick="showLockedMessage(3)">3. ‰æ°Ê†ºÊüªÂÆö</button>
            <button class="nav-tab locked" onclick="showLockedMessage(4)">4. ËûçË≥áË®àÁîª</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">5. ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">6. ÂøÖË¶ÅÊõ∏È°û‰∏ÄÂºè</button>
        </div>

        <!-- 1. Áâ©‰ª∂Ê¶ÇË¶ÅÔºà„Çπ„ÉÜ„Éº„Ç∏1„ÅßÈñãÁ§∫Ôºâ -->
        <div id="overview" class="tab-content active">
            <div class="section-card">
                <h2 class="section-title">1. Áâ©‰ª∂Ê¶ÇË¶Å„Éª„É≠„Ç±„Éº„Ç∑„Éß„É≥ÂàÜÊûê</h2>
                
                <h3 class="subsection-title">Âü∫Êú¨ÊÉÖÂ†±</h3>
                <div class="property-overview">
                    <div class="info-box">
                        <h4>Áâ©‰ª∂ÂêçÁß∞</h4>
                        <p>PRISMÂçóÈùíÂ±±„Éó„É¨„Éü„Ç¢„É†„É¨„Ç∏„Éá„É≥„Çπ</p>
                        <p>Êù±‰∫¨ÈÉΩÊ∏ØÂå∫ÂçóÈùíÂ±±5-12-8</p>
                    </div>
                    <div class="info-box">
                        <h4>Áâ©‰ª∂„Çø„Ç§„Éó</h4>
                        <p>RCÈÄ† „Éá„Ç∂„Ç§„Éä„Éº„Ç∫„Éû„É≥„Ç∑„Éß„É≥</p>
                        <p>ÁØâÂπ¥ÊúàÔºö2020Âπ¥3ÊúàÁ´£Â∑•</p>
                    </div>
                    <div class="info-box">
                        <h4>Áâ©‰ª∂‰æ°Ê†º</h4>
                        <span class="highlight-number">6.8ÂÑÑÂÜÜ</span>
                        <p>Ë°®Èù¢Âà©Âõû„ÇäÔºö6.35%</p>
                    </div>
                </div>

                <h3 class="subsection-title">Á´ãÂú∞Ë©ï‰æ°</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>Ë©ï‰æ°È†ÖÁõÆ</th>
                            <th>ÂÜÖÂÆπ</th>
                            <th>„Çπ„Ç≥„Ç¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ÊúÄÂØÑÈßÖ</td>
                            <td>Êù±‰∫¨„É°„Éà„É≠„ÄåË°®ÂèÇÈÅì„ÄçÈßÖ ÂæíÊ≠©6ÂàÜ / „ÄåÊ∏ãË∞∑„ÄçÈßÖ ÂæíÊ≠©12ÂàÜ</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                        <tr>
                            <td>ÈÉΩÂøÉ„Ç¢„ÇØ„Çª„Çπ</td>
                            <td>ÈäÄÂ∫ßÁ∑ö„ÉªÂçäËîµÈñÄÁ∑ö„ÉªÂçÉ‰ª£Áî∞Á∑öÂà©Áî®ÂèØ„ÄÅ‰∏ªË¶ÅÈßÖÁõ¥ÈÄö</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                        <tr>
                            <td>Âë®Ëæ∫Áí∞Â¢É</td>
                            <td>ÈùíÂ±±ÈÄö„ÇäÊ≤ø„ÅÑ„ÄÅÈ´òÁ¥ö„Éñ„É©„É≥„ÉâÂ∫ó„ÉªÈ£≤È£üÂ∫óÈõÜÁ©ç„Ç®„É™„Ç¢</td>
                            <td>‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="subsection-title">ËøëÈö£Ë≥ÉË≤∏Â∏ÇÂ†¥ÂàÜÊûê</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">„Ç®„É™„Ç¢Âπ≥ÂùáË≥ÉÊñô</div>
                        <div class="kpi-value">28.5</div>
                        <div class="kpi-unit">‰∏áÂÜÜ/ÊúàÔºà1LDKÔºâ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Á©∫ÂÆ§Áéá</div>
                        <div class="kpi-value">2.8</div>
                        <div class="kpi-unit">%ÔºàÊ∏ØÂå∫Âπ≥ÂùáÔºâ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Á´∂ÂêàÁâ©‰ª∂Êï∞</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-unit">Ê£üÔºàÂçäÂæÑ500mÔºâ</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="advanceStage()">Ë©≥Á¥∞ÊÉÖÂ†±„ÇíÂ∏åÊúõ„Åô„Çã</button>
                    <button class="btn btn-primary" onclick="requestConsultation()">Ë≥™Âïè„Åô„Çã</button>
                </div>
            </div>
        </div>

        <!-- 2. ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥Ôºà„Çπ„ÉÜ„Éº„Ç∏2„ÅßÈñãÁ§∫Ôºâ -->
        <div id="simulation" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">2. ÊäïË≥áÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥</h2>
                
                <h3 class="subsection-title">ÊäïË≥áÊ¶ÇË¶Å</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">Áâ©‰ª∂‰æ°Ê†º</div>
                        <div class="kpi-value">6.8</div>
                        <div class="kpi-unit">ÂÑÑÂÜÜ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ÊÉ≥ÂÆöÂπ¥ÈñìË≥ÉÊñô</div>
                        <div class="kpi-value">4,320</div>
                        <div class="kpi-unit">‰∏áÂÜÜ</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">Ë°®Èù¢Âà©Âõû„Çä</div>
                        <div class="kpi-value">6.35</div>
                        <div class="kpi-unit">%</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ÂÆüË≥™Âà©Âõû„Çä</div>
                        <div class="kpi-value">5.28</div>
                        <div class="kpi-unit">%</div>
                    </div>
                </div>

                <h3 class="subsection-title">„Ç≠„É£„ÉÉ„Ç∑„É•„Éï„É≠„Éº‰∫àÊ∏¨ÔºàÂπ¥ÈñìÔºâ</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>È†ÖÁõÆ</th>
                            <th>1Âπ¥ÁõÆ</th>
                            <th>5Âπ¥ÁõÆ</th>
                            <th>10Âπ¥ÁõÆ</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Ë≥ÉÊñôÂèéÂÖ•</td>
                            <td style="text-align: right;">4,320‰∏áÂÜÜ</td>
                            <td style="text-align: right;">4,320‰∏áÂÜÜ</td>
                            <td style="text-align: right;">4,200‰∏áÂÜÜ</td>
                        </tr>
                        <tr>
                            <td>ÁÆ°ÁêÜË≤ª„Éª‰øÆÁπïË≤ª</td>
                            <td style="text-align: right;">-432‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-450‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-480‰∏áÂÜÜ</td>
                        </tr>
                        <tr>
                            <td>„É≠„Éº„É≥ËøîÊ∏àÔºàÊÉ≥ÂÆöÔºâ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                            <td style="text-align: right;">-2,040‰∏áÂÜÜ</td>
                        </tr>
                        <tr style="background: var(--primary-lighter);">
                            <td><strong>Á¥îÂèéÁõäÔºàÁ®éÂâçÔºâ</strong></td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,662‰∏áÂÜÜ</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,650‰∏áÂÜÜ</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,505‰∏áÂÜÜ</td>
                        </tr>
                    </tbody>
                </table>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="advanceStage()">‰æ°Ê†ºÊüªÂÆö„ÇíÁ¢∫Ë™ç„Åô„Çã</button>
                    <button class="btn btn-primary" onclick="requestConsultation()">Â∞ÇÈñÄÂÆ∂„Å´Áõ∏Ë´á„Åô„Çã</button>
                </div>
            </div>
        </div>

        <!-- 3. ‰æ°Ê†ºÊüªÂÆöÔºà„Çπ„ÉÜ„Éº„Ç∏3„ÅßÈñãÁ§∫Ôºâ -->
        <div id="valuation" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">‰æ°Ê†ºÊüªÂÆöÂàÜÊûê</h2>
                        <p class="locked-description">
                            PRISMÁã¨Ëá™„ÅÆ3ÊâãÊ≥ï„Å´„Çà„ÇãË©≥Á¥∞„Å™‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ<br>
                            „Ç®„É™„Ç¢Áõ∏Â†¥„Å®„ÅÆÊØîËºÉ„ÄÅÊäïË≥áÂ¶•ÂΩìÊÄß„ÅÆÂà§ÂÆöÁµêÊûú„ÇíÂê´„Åø„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(3)">
                            „Ç¢„É≥„É≠„ÉÉ„ÇØ„ÇíÁî≥Ë´ã„Åô„Çã
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. ËûçË≥áË®àÁîªÔºà„Çπ„ÉÜ„Éº„Ç∏4„ÅßÈñãÁ§∫Ôºâ -->
        <div id="finance" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">ËûçË≥áË®àÁîªË©≥Á¥∞</h2>
                        <p class="locked-description">
                            ÊèêÊê∫ÈáëËûçÊ©üÈñ¢„ÅÆËûçË≥áÊù°‰ª∂„ÄÅÂøÖË¶ÅÂ±ûÊÄß„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ<br>
                            ÈäÄË°åË©ï‰æ°È°ç‰∫àÊ∏¨„Å™„Å©„ÄÅËûçË≥áÂÆüÁèæ„Å´Âêë„Åë„ÅüË©≥Á¥∞ÊÉÖÂ†±„Çí„ÅîÊèê‰æõ„Åó„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(4)">
                            ÂïÜË´á„ÇíÁî≥„ÅóËæº„ÇÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„ÉºÔºà„Çπ„ÉÜ„Éº„Ç∏5„ÅßÈñãÁ§∫Ôºâ -->
        <div id="summary" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº</h2>
                        <p class="locked-description">
                            Á∑èÂêàË©ï‰æ°„ÄÅ„É™„Çπ„ÇØÂàÜÊûê„ÄÅÊäïË≥á„Çπ„Ç±„Ç∏„É•„Éº„É´Á≠â„ÄÅ<br>
                            ÊúÄÁµÇÁöÑ„Å™ÊäïË≥áÂà§Êñ≠„Å´ÂøÖË¶Å„Å™ÂÖ®ÊÉÖÂ†±„ÇíÁµ±Âêà„Åó„Åü„É¨„Éù„Éº„Éà„Åß„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            ÊúÄÁµÇÊ§úË®éÊÆµÈöé„Å∏ÈÄ≤„ÇÄ
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. ÂøÖË¶ÅÊõ∏È°û‰∏ÄÂºèÔºà„Çπ„ÉÜ„Éº„Ç∏5„ÅßÈñãÁ§∫Ôºâ -->
        <div id="documents" class="tab-content">
            <div class="section-card">
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">üîí</div>
                        <h2 class="locked-title">Â•ëÁ¥ÑÈñ¢ÈÄ£Êõ∏È°û‰∏ÄÂºè</h2>
                        <p class="locked-description">
                            ÈáçË¶Å‰∫ãÈ†ÖË™¨ÊòéÊõ∏„ÄÅÂ£≤Ë≤∑Â•ëÁ¥ÑÊõ∏Ê°à„ÄÅÁôªË®òÈñ¢ÈÄ£Êõ∏È°ûÁ≠â„ÄÅ<br>
                            Â•ëÁ¥Ñ„Å´ÂøÖË¶Å„Å™ÂÖ®„Å¶„ÅÆÊõ∏È°û„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            Â•ëÁ¥ÑÊ∫ñÂÇô„ÇíÈñãÂßã„Åô„Çã
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÁèæÂú®„ÅÆ„Çπ„ÉÜ„Éº„Ç∏Ôºà„Éá„É¢Áî®Ôºâ
        let currentStage = 2;
        
        function showTab(tabId, requiredStage) {
            // ÂøÖË¶Å„Å™„Çπ„ÉÜ„Éº„Ç∏„Å´ÈÅî„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêà
            if (requiredStage && requiredStage > currentStage) {
                showLockedMessage(requiredStage);
                return;
            }
            
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
            
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Éú„Çø„É≥„Åã„Çâ active „ÇØ„É©„Çπ„ÇíÂâäÈô§
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            document.getElementById(tabId).classList.add('active');
            
            // ÈÅ∏Êäû„Åï„Çå„Åü„Çø„Éñ„Éú„Çø„É≥„Å´ active „ÇØ„É©„Çπ„ÇíËøΩÂä†
            const activeTab = Array.from(tabs).find(tab => 
                tab.textContent.includes(getTabTitle(tabId))
            );
            if (activeTab && !activeTab.classList.contains('locked')) {
                activeTab.classList.add('active');
            }
            
            // „Éö„Éº„Ç∏„Éà„ÉÉ„Éó„Å´„Çπ„ÇØ„É≠„Éº„É´
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function getTabTitle(tabId) {
            const titles = {
                'overview': 'Áâ©‰ª∂Ê¶ÇË¶Å',
                'simulation': 'ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥',
                'valuation': '‰æ°Ê†ºÊüªÂÆö',
                'finance': 'ËûçË≥áË®àÁîª',
                'summary': 'ÊäïË≥áÂà§Êñ≠',
                'documents': 'ÂøÖË¶ÅÊõ∏È°û'
            };
            return titles[tabId] || '';
        }
        
        function showLockedMessage(requiredStage) {
            const messages = {
                3: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åè„Å´„ÅØ„ÄÅË©≥Á¥∞Ê§úË®éÊÆµÈöé„Å∏„ÅÆÁßªË°å„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ',
                4: 'ËûçË≥áË®àÁîª„ÅÆË©≥Á¥∞„ÅØ„ÄÅÂïÜË´áÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                5: 'ÊúÄÁµÇË≥áÊñô„ÅØ„ÄÅÂ•ëÁ¥ÑÂâç„ÅÆÊúÄÁµÇÁ¢∫Ë™çÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ'
            };
            
            alert(messages[requiredStage] || '„Åì„ÅÆÊÉÖÂ†±„ÅØÊ¨°„ÅÆÊÆµÈöé„Åß„ÅîÊèê‰æõ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ');
        }
        
        function requestUnlock(stage) {
            const actions = {
                3: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÅÆ„Ç¢„É≥„É≠„ÉÉ„ÇØÁî≥Ë´ã„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇÊãÖÂΩìËÄÖ„Çà„ÇäÈÄ£Áµ°„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                4: 'ÂïÜË´á„ÅÆ„ÅäÁî≥„ÅóËæº„Åø„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇÊó•Á®ãË™øÊï¥„ÅÆ„ÅîÈÄ£Áµ°„Çí„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                5: 'ÊúÄÁµÇÊ§úË®éÊÆµÈöé„Å∏„ÅÆÁßªË°å„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åó„Åü„ÄÇÂÖ®Ë≥áÊñô„ÇíÊ∫ñÂÇô„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ'
            };
            
            alert(actions[stage]);
            // ÂÆüÈöõ„Å´„ÅØ„Åì„Åì„ÅßAPI„Ç≥„Éº„É´„Å™„Å©„ÇíË°å„ÅÜ
        }
        
        function advanceStage() {
            if (currentStage < 5) {
                currentStage++;
                updateStageIndicator();
                unlockContent();
                alert(`„Çπ„ÉÜ„Éº„Ç∏${currentStage}„Å´ÈÄ≤„Åø„Åæ„Åó„Åü„ÄÇÊñ∞„Åó„ÅÑÊÉÖÂ†±„Åå„Ç¢„É≥„É≠„ÉÉ„ÇØ„Åï„Çå„Åæ„Åó„Åü„ÄÇ`);
            }
        }
        
        function updateStageIndicator() {
            // „Çπ„ÉÜ„Éº„Ç∏„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº„ÇíÊõ¥Êñ∞
            const stageItems = document.querySelectorAll('.stage-item');
            stageItems.forEach((item, index) => {
                if (index < currentStage - 1) {
                    item.classList.add('completed');
                    item.classList.remove('current');
                } else if (index === currentStage - 1) {
                    item.classList.add('current');
                    item.classList.remove('completed');
                } else {
                    item.classList.remove('completed', 'current');
                }
            });
            
            // „Çπ„ÉÜ„Éº„Ç∏Ë™¨Êòé„ÇíÊõ¥Êñ∞
            const descriptions = {
                1: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏1ÔºöÂàùÂõûÊé•Ëß¶',
                    desc: 'Áâ©‰ª∂„ÅÆÂü∫Êú¨ÊÉÖÂ†±„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„ÅèÊÆµÈöé„Åß„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å',
                    next: 'ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥'
                },
                2: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏2ÔºöÈñ¢ÂøÉË°®Êòé',
                    desc: 'Áâ©‰ª∂Ê¶ÇË¶Å„Çí„ÅîÁ¢∫Ë™ç„ÅÑ„Åü„Å†„Åç„ÄÅ„Çà„ÇäË©≥Á¥∞„Å™ÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„Çí„ÅîË¶ß„ÅÑ„Åü„Å†„Åë„ÇãÊÆµÈöé„Åß„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥',
                    next: '‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„ÄÅËûçË≥áË®àÁîªË©≥Á¥∞'
                },
                3: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏3ÔºöË©≥Á¥∞Ê§úË®é',
                    desc: 'PRISMÁã¨Ëá™„ÅÆ‰æ°Ê†ºÊüªÂÆöÂàÜÊûê„Å´„Çà„Çä„ÄÅÊäïË≥áÂà§Êñ≠„ÅÆÊùêÊñô„Çí„ÅîÊèê‰æõ„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ‰æ°Ê†ºÊüªÂÆö',
                    next: 'ËûçË≥áË®àÁîªË©≥Á¥∞„ÄÅÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº'
                },
                4: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏4ÔºöÂïÜË´á',
                    desc: 'ËûçË≥áË®àÁîª„ÇíÂê´„ÇÄÂÖ∑‰ΩìÁöÑ„Å™ÊäïË≥á„Éó„É©„É≥„Çí„ÅîÊèêÊ°à„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥„ÄÅ‰æ°Ê†ºÊüªÂÆö„ÄÅËûçË≥áË®àÁîª',
                    next: 'ÊäïË≥áÂà§Êñ≠„Çµ„Éû„É™„Éº„ÄÅÂ•ëÁ¥ÑÊõ∏È°û'
                },
                5: {
                    title: '„Çπ„ÉÜ„Éº„Ç∏5ÔºöÊúÄÁµÇÁ¢∫Ë™ç',
                    desc: 'ÂÖ®„Å¶„ÅÆÊÉÖÂ†±„ÇíÈñãÁ§∫„Åó„ÄÅÊúÄÁµÇÁöÑ„Å™ÊäïË≥áÂà§Êñ≠„Çí„Çµ„Éù„Éº„Éà„Åó„Åæ„Åô„ÄÇ',
                    unlocked: 'ÂÖ®Ë≥áÊñô',
                    next: 'Â•ëÁ¥ÑÊâãÁ∂ö„Åç„Å∏'
                }
            };
            
            const stageDesc = descriptions[currentStage];
            if (stageDesc) {
                document.querySelector('.stage-description').innerHTML = `
                    <h3>${stageDesc.title}</h3>
                    <p>${stageDesc.desc}</p>
                    <p style="margin-top: 10px;"><strong>„Ç¢„É≥„É≠„ÉÉ„ÇØÊ∏à„ÅøÔºö</strong>${stageDesc.unlocked}</p>
                    <p><strong>Ê¨°„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„ÅßÈñãÁ§∫Ôºö</strong>${stageDesc.next}</p>
                `;
            }
        }
        
        function unlockContent() {
            const tabs = document.querySelectorAll('.nav-tab');
            const unlockMap = {
                1: [0],              // „Çπ„ÉÜ„Éº„Ç∏1: Áâ©‰ª∂Ê¶ÇË¶Å„ÅÆ„Åø
                2: [0, 1],           // „Çπ„ÉÜ„Éº„Ç∏2: Áâ©‰ª∂Ê¶ÇË¶Å„ÄÅÂèéÁõä„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
                3: [0, 1, 2],        // „Çπ„ÉÜ„Éº„Ç∏3: Ôºã‰æ°Ê†ºÊüªÂÆö
                4: [0, 1, 2, 3],     // „Çπ„ÉÜ„Éº„Ç∏4: ÔºãËûçË≥áË®àÁîª
                5: [0, 1, 2, 3, 4, 5] // „Çπ„ÉÜ„Éº„Ç∏5: ÂÖ®„Å¶
            };
            
            tabs.forEach((tab, index) => {
                if (unlockMap[currentStage] && unlockMap[currentStage].includes(index)) {
                    tab.classList.remove('locked');
                } else {
                    tab.classList.add('locked');
                }
            });
        }

        function requestConsultation() {
            window.open('https://line.me/ti/p/@prism', '_blank');
        }

        // „É≠„Ç∞„Ç¢„Ç¶„ÉàÊ©üËÉΩ
        function logout() {
            sessionStorage.removeItem('prism_user');
            window.location.href = '/';
        }

        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂá¶ÁêÜ
        document.addEventListener('DOMContentLoaded', function() {
            // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíË°®Á§∫
            const user = JSON.parse(sessionStorage.getItem('prism_user') || '{}');
            if (user.name) {
                document.getElementById('memberName').textContent = user.name;
            }

            // ÂàùÊúüÁä∂ÊÖãË®≠ÂÆö
            updateStageIndicator();
            unlockContent();
        });
    </script>
</body>
</html>