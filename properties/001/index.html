<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹ - æŠ•è³‡å®¶å‘ã‘æ®µéšçš„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ </title>
    <link rel="stylesheet" href="/assets/css/common.css">
    <style>
        .member-header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
            color: white;
            padding: 20px 0;
            box-shadow: var(--shadow-sm);
        }

        .member-header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .member-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .member-name {
            font-weight: 600;
        }

        .logo {
            display: inline-flex;
            align-items: center;
            height: 30px;
        }

        .logo img {
            height: 100%;
            width: auto;
            filter: brightness(0) invert(1);
        }

        .btn-logout {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            text-decoration: none;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-logout:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .breadcrumb {
            padding: 20px 0;
            font-size: 0.9em;
            color: var(--gray-500);
        }

        .breadcrumb a {
            color: var(--primary-light);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* æ®µéšçš„ææ¡ˆã‚·ã‚¹ãƒ†ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’common.cssãƒ™ãƒ¼ã‚¹ã§èª¿æ•´ */
        .stage-indicator {
            background: white;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .stage-progress {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .stage-item {
            flex: 1;
            text-align: center;
            position: relative;
            padding: 10px;
        }

        .stage-item:not(:last-child):after {
            content: '';
            position: absolute;
            top: 35px;
            right: -50%;
            width: 100%;
            height: 2px;
            background: var(--gray-100);
            z-index: 0;
        }

        .stage-item.completed:not(:last-child):after {
            background: var(--success);
        }

        .stage-circle {
            width: 60px;
            height: 60px;
            background: var(--gray-100);
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3em;
            color: var(--gray-300);
            position: relative;
            z-index: 1;
            border-radius: 50%;
        }

        .stage-item.completed .stage-circle {
            background: var(--success);
            color: white;
        }

        .stage-item.current .stage-circle {
            background: var(--primary-light);
            color: white;
            box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.2);
        }

        .stage-label {
            font-size: 0.875rem;
            color: var(--gray-500);
            font-weight: 600;
        }

        .stage-item.completed .stage-label {
            color: var(--success);
        }

        .stage-item.current .stage-label {
            color: var(--primary-light);
        }

        .nav-tabs {
            display: flex;
            background: white;
            box-shadow: var(--shadow-sm);
            overflow-x: auto;
            margin-bottom: 30px;
        }

        .nav-tab {
            padding: 20px 30px;
            background: white;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: var(--gray-500);
            white-space: nowrap;
            transition: all 0.2s ease;
            flex-shrink: 0;
            position: relative;
        }

        .nav-tab.locked {
            background: var(--gray-50);
            color: var(--gray-200);
            cursor: not-allowed;
            position: relative;
        }

        .nav-tab.locked:after {
            content: 'ğŸ”’';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2em;
        }

        .nav-tab:not(.locked):hover {
            background: var(--gray-50);
        }

        .nav-tab.active {
            color: var(--primary-dark);
            border-bottom: 3px solid var(--primary-light);
            background: var(--primary-lighter);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-card {
            background: white;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .locked-overlay {
            position: relative;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%);
            border: 2px dashed var(--gray-200);
        }

        .locked-content {
            text-align: center;
            padding: 40px;
        }

        .locked-icon {
            font-size: 4em;
            color: var(--gray-200);
            margin-bottom: 20px;
        }

        .locked-title {
            font-size: 1.5em;
            color: var(--gray-500);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .locked-description {
            color: var(--gray-400);
            margin-bottom: 20px;
        }

        .unlock-button {
            background: var(--primary-black);
            color: white;
            padding: 12px 30px;
            border: none;
            font-weight: 600;
            letter-spacing: 0.03em;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-block;
            text-decoration: none;
            border-radius: 0;
        }

        .unlock-button:hover {
            background: #1a1a1a;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .subsection-title {
            color: var(--primary-dark);
            font-size: 1.5em;
            margin: 25px 0 15px;
            font-weight: 600;
            border-left: 4px solid var(--primary-light);
            padding-left: 15px;
        }

        .property-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-box {
            background: var(--gray-50);
            padding: 20px;
            border-left: 4px solid var(--primary-light);
        }

        .info-box h4 {
            color: var(--primary-dark);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .info-box p {
            color: var(--gray-500);
            margin: 5px 0;
        }

        .highlight-number {
            font-size: 2.5em;
            color: var(--primary-dark);
            font-weight: 700;
            display: block;
            margin: 10px 0;
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            border-top: 3px solid var(--primary-light);
        }

        .kpi-label {
            color: var(--gray-400);
            font-size: 0.875rem;
            letter-spacing: 0.05em;
            margin-bottom: 10px;
        }

        .kpi-value {
            color: var(--primary-dark);
            font-size: 2.5em;
            font-weight: 700;
        }

        .kpi-unit {
            color: var(--gray-500);
            font-size: 0.875rem;
            margin-top: 5px;
        }

        .stage-description {
            background: var(--primary-lighter);
            padding: 20px;
            margin-top: 20px;
        }

        .stage-description h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .action-buttons {
            text-align: center;
            padding: 30px;
            background: var(--gray-50);
            margin-top: 30px;
        }

        .specs-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: var(--shadow-sm);
            margin: 20px 0;
        }

        .specs-table thead {
            background: linear-gradient(to bottom, #edf2f7, #e2e8f0);
        }

        .specs-table th {
            color: var(--gray-600);
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 2px solid var(--gray-200);
            letter-spacing: 0.03em;
        }

        .specs-table td {
            padding: 12px 15px;
            border-bottom: 1px solid var(--gray-100);
            color: var(--gray-500);
        }

        .specs-table tr:hover {
            background: var(--gray-50);
            transition: background 0.2s;
        }

        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
            }

            .member-header {
                padding: 15px 0;
            }

            .member-header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
                padding: 0 15px;
            }

            .member-info {
                gap: 10px;
                font-size: 0.9em;
            }

            .btn-logout {
                padding: 6px 12px;
                font-size: 0.8em;
            }

            /* ç®¡ç†è€…ãƒ‘ãƒãƒ«ã®ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ */
            #adminPanel {
                width: calc(100vw - 30px) !important;
                right: 15px !important;
                left: 15px !important;
                top: 140px !important;
                max-height: 60vh !important;
            }

            /* ãƒ‘ãƒ³ããšãƒŠãƒ“ */
            .breadcrumb {
                font-size: 0.9em;
                margin-bottom: 20px;
            }

            /* ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ */
            .stage-indicator {
                margin-bottom: 20px;
            }

            .stage-indicator h2 {
                font-size: 1.3em;
                margin-bottom: 15px;
            }

            .stage-progress {
                flex-direction: row;
                gap: 5px;
                overflow-x: auto;
                padding: 10px 0;
            }

            .stage-item {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 5px;
                padding: 10px;
                background: white;
                border-radius: 10px;
                box-shadow: var(--shadow-sm);
                min-width: 60px;
                flex-shrink: 0;
            }

            .stage-item:not(:last-child):after {
                display: none;
            }

            .stage-circle {
                width: 36px;
                height: 36px;
                line-height: 36px;
                font-size: 1em;
                flex-shrink: 0;
            }

            .stage-label {
                font-size: 0.7em;
                font-weight: 600;
                text-align: center;
            }

            /* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
            .nav-tabs {
                flex-direction: column;
                gap: 5px;
                margin-bottom: 20px;
            }

            .nav-tab {
                padding: 15px 20px;
                font-size: 0.95em;
                text-align: left;
                border-radius: 8px;
            }

            .nav-tab.locked {
                opacity: 0.5;
                background: var(--gray-100);
                padding: 12px 20px;
            }

            /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚«ãƒ¼ãƒ‰ */
            .section-card {
                padding: 20px 15px;
                margin-bottom: 20px;
            }

            .section-title {
                font-size: 1.4em;
                margin-bottom: 15px;
            }

            .subsection-title {
                font-size: 1.1em;
                margin: 20px 0 10px;
            }

            /* KPIã‚°ãƒªãƒƒãƒ‰ */
            .kpi-grid {
                grid-template-columns: 1fr 1fr;
                gap: 15px;
            }

            .kpi-card {
                padding: 15px;
            }

            .kpi-value {
                font-size: 1.8em;
            }

            /* ç‰©ä»¶æ¦‚è¦ */
            .property-overview {
                flex-direction: column;
                gap: 15px;
            }

            .info-box {
                padding: 15px;
            }

            .highlight-number {
                font-size: 1.6em;
            }

            /* ãƒ­ãƒƒã‚¯ç”»é¢ */
            .locked-overlay {
                padding: 30px 20px;
            }

            .locked-content {
                max-width: none;
            }

            .locked-icon {
                font-size: 3em;
                margin-bottom: 15px;
            }

            .locked-title {
                font-size: 1.3em;
                margin-bottom: 10px;
            }

            .locked-description {
                font-size: 0.95em;
                margin-bottom: 20px;
                line-height: 1.6;
            }

            /* ãƒœã‚¿ãƒ³ */
            .btn {
                padding: 12px 24px;
                font-size: 0.95em;
            }

            .unlock-button {
                padding: 12px 24px;
                font-size: 0.95em;
            }

            .action-buttons {
                margin-top: 20px;
            }

            .action-buttons .btn {
                width: 100%;
                margin-bottom: 10px;
            }

            /* ãƒãƒ£ãƒ¼ãƒˆãƒ»ã‚°ãƒ©ãƒ•ã®ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– */
            .chart-container {
                overflow-x: auto;
                margin: 15px 0;
            }

            /* ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– */
            table {
                font-size: 0.9em;
                width: 100%;
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }

            /* ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ¢ãƒã‚¤ãƒ«èª¿æ•´ */
            body {
                font-size: 16px;
                line-height: 1.6;
            }

            p {
                line-height: 1.7;
            }
        }
    </style>
</head>
<body>
    <!-- ä¼šå“¡ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="member-header">
        <div class="member-header-content">
            <div class="logo">
                <img src="/assets/images/logo/prism-logo-optimized.svg" alt="PRISM">
            </div>
            <div class="member-info">
                <span class="member-name" id="memberName">VIPä¼šå“¡æ§˜</span>
                <button id="adminToggle" onclick="toggleAdminMode()" class="btn-logout" style="margin-right: 10px;">ğŸ”§ ç®¡ç†è€…</button>
                <a href="/" class="btn-logout" onclick="logout()">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
            </div>
        </div>
    </header>

    <!-- ç®¡ç†è€…ãƒ‘ãƒãƒ«èƒŒæ™¯ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div id="adminOverlay" onclick="closeAdminPanel()" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 999;"></div>
    
    <!-- ç®¡ç†è€…ãƒ‘ãƒãƒ« -->
    <div id="adminPanel" style="display: none; position: fixed; top: 80px; right: 20px; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); width: 320px; z-index: 1000; max-height: 80vh; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <h3 style="margin: 0; color: var(--primary-dark);">ğŸ”§ ç®¡ç†è€…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«</h3>
            <button onclick="closeAdminPanel()" style="background: none; border: none; font-size: 24px; cursor: pointer; padding: 0; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; color: var(--gray-500);">Ã—</button>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 5px; font-weight: 600; color: var(--gray-500);">é¡§å®¢ã‚¿ã‚¤ãƒ—é¸æŠ</label>
            <select id="customerType" onchange="changeCustomerType()" style="width: 100%; padding: 8px; border: 1px solid var(--gray-200); border-radius: 5px;">
                <option value="new">æ–°è¦é¡§å®¢ï¼ˆç”°ä¸­æ§˜ï¼‰- ã‚¹ãƒ†ãƒ¼ã‚¸1</option>
                <option value="interested" selected>é–¢å¿ƒé¡§å®¢ï¼ˆéˆ´æœ¨æ§˜ï¼‰- ã‚¹ãƒ†ãƒ¼ã‚¸2</option>
                <option value="serious">æœ¬æ ¼æ¤œè¨ï¼ˆå±±ç”°æ§˜ï¼‰- ã‚¹ãƒ†ãƒ¼ã‚¸3</option>
                <option value="negotiating">å•†è«‡ä¸­ï¼ˆä½è—¤æ§˜ï¼‰- ã‚¹ãƒ†ãƒ¼ã‚¸4</option>
                <option value="closing">æˆç´„å‰ï¼ˆé«˜æ©‹æ§˜ï¼‰- ã‚¹ãƒ†ãƒ¼ã‚¸5</option>
            </select>
        </div>
        
        <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px; font-weight: 600; color: var(--gray-500);">ã‚¹ãƒ†ãƒ¼ã‚¸ç›´æ¥æŒ‡å®š</label>
            <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                <button class="stage-btn" onclick="setStage(1)" style="padding: 8px 16px; border: 1px solid var(--gray-200); background: white; cursor: pointer; border-radius: 5px;">S1</button>
                <button class="stage-btn active" onclick="setStage(2)" style="padding: 8px 16px; border: 1px solid var(--primary-light); background: var(--primary-lighter); cursor: pointer; border-radius: 5px; color: var(--primary-dark);">S2</button>
                <button class="stage-btn" onclick="setStage(3)" style="padding: 8px 16px; border: 1px solid var(--gray-200); background: white; cursor: pointer; border-radius: 5px;">S3</button>
                <button class="stage-btn" onclick="setStage(4)" style="padding: 8px 16px; border: 1px solid var(--gray-200); background: white; cursor: pointer; border-radius: 5px;">S4</button>
                <button class="stage-btn" onclick="setStage(5)" style="padding: 8px 16px; border: 1px solid var(--gray-200); background: white; cursor: pointer; border-radius: 5px;">S5</button>
            </div>
        </div>
        
        <div style="margin-bottom: 20px; padding: 15px; background: var(--gray-50); border-radius: 5px;">
            <p style="margin-bottom: 5px;"><strong>ç¾åœ¨ã®çŠ¶æ…‹ï¼š</strong></p>
            <p style="margin: 2px 0;">é¡§å®¢: <span id="currentCustomer">é–¢å¿ƒé¡§å®¢ï¼ˆéˆ´æœ¨æ§˜ï¼‰</span></p>
            <p style="margin: 2px 0;">ã‚¹ãƒ†ãƒ¼ã‚¸: <span id="currentStageInfo">ã‚¹ãƒ†ãƒ¼ã‚¸2</span></p>
        </div>
        
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button onclick="unlockAll()" style="padding: 10px; background: var(--success); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">ğŸ”“ å…¨è³‡æ–™ã‚¢ãƒ³ãƒ­ãƒƒã‚¯</button>
            <button onclick="resetAll()" style="padding: 10px; background: var(--danger); color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">ğŸ”„ ã‚¹ãƒ†ãƒ¼ã‚¸2ã«ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
    </div>

    <div class="container">
        <!-- ãƒ‘ãƒ³ããšãƒªã‚¹ãƒˆ -->
        <div class="breadcrumb">
            <a href="/member/">ç‰©ä»¶ä¸€è¦§</a> > <a href="/properties/001/">PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹</a>
        </div>

        <!-- ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
        <div class="stage-indicator">
            <h2 style="color: var(--primary-dark); margin-bottom: 20px;">ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸</h2>
            <div class="stage-progress">
                <div class="stage-item completed" id="stage1">
                    <div class="stage-circle">1</div>
                    <div class="stage-label">åˆå›æ¥è§¦</div>
                </div>
                <div class="stage-item current" id="stage2">
                    <div class="stage-circle">2</div>
                    <div class="stage-label">é–¢å¿ƒè¡¨æ˜</div>
                </div>
                <div class="stage-item" id="stage3">
                    <div class="stage-circle">3</div>
                    <div class="stage-label">è©³ç´°æ¤œè¨</div>
                </div>
                <div class="stage-item" id="stage4">
                    <div class="stage-circle">4</div>
                    <div class="stage-label">å•†è«‡</div>
                </div>
                <div class="stage-item" id="stage5">
                    <div class="stage-circle">5</div>
                    <div class="stage-label">æœ€çµ‚ç¢ºèª</div>
                </div>
            </div>
            <div class="stage-description">
                <h3>ã‚¹ãƒ†ãƒ¼ã‚¸2ï¼šé–¢å¿ƒè¡¨æ˜</h3>
                <p>ç‰©ä»¶æ¦‚è¦ã‚’ã”ç¢ºèªã„ãŸã ãã€ã‚ˆã‚Šè©³ç´°ãªåç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ã„ãŸã ã‘ã‚‹æ®µéšã§ã™ã€‚</p>
                <p style="margin-top: 10px;"><strong>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯æ¸ˆã¿ï¼š</strong>ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</p>
                <p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§é–‹ç¤ºï¼š</strong>ä¾¡æ ¼æŸ»å®šåˆ†æã€èè³‡è¨ˆç”»è©³ç´°</p>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview', 1)">1. ç‰©ä»¶æ¦‚è¦</button>
            <button class="nav-tab" onclick="showTab('simulation', 2)">2. åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
            <button class="nav-tab locked" onclick="showLockedMessage(3)">3. ä¾¡æ ¼æŸ»å®š</button>
            <button class="nav-tab locked" onclick="showLockedMessage(4)">4. èè³‡è¨ˆç”»</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</button>
            <button class="nav-tab locked" onclick="showLockedMessage(5)">6. å¿…è¦æ›¸é¡ä¸€å¼</button>
        </div>

        <!-- 1. ç‰©ä»¶æ¦‚è¦ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸1ã§é–‹ç¤ºï¼‰ -->
        <div id="overview" class="tab-content active">
            <div class="section-card">
                <h2 class="section-title">1. ç‰©ä»¶æ¦‚è¦ãƒ»ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆ†æ</h2>
                
                <!-- ç‰©ä»¶ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼ -->
                <div style="margin-bottom: 30px;">
                    <img src="/assets/images/properties/001/main.jpg" alt="PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹ ãƒ¡ã‚¤ãƒ³" style="width: 100%; height: auto; border-radius: 10px; margin-bottom: 15px; box-shadow: var(--shadow-sm);">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <img src="/assets/images/properties/001/exterior.jpg" alt="å¤–è¦³" style="width: 100%; height: auto; border-radius: 10px; box-shadow: var(--shadow-sm);">
                        <img src="/assets/images/properties/001/interior.jpg" alt="å†…è¦³" style="width: 100%; height: auto; border-radius: 10px; box-shadow: var(--shadow-sm);">
                    </div>
                </div>
                
                <h3 class="subsection-title">åŸºæœ¬æƒ…å ±</h3>
                <div class="property-overview">
                    <div class="info-box">
                        <h4>ç‰©ä»¶åç§°</h4>
                        <p>PRISMå—é’å±±ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ¬ã‚¸ãƒ‡ãƒ³ã‚¹</p>
                        <p>æ±äº¬éƒ½æ¸¯åŒºå—é’å±±5-12-8</p>
                    </div>
                    <div class="info-box">
                        <h4>ç‰©ä»¶ã‚¿ã‚¤ãƒ—</h4>
                        <p>RCé€  ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‚ºãƒãƒ³ã‚·ãƒ§ãƒ³</p>
                        <p>ç¯‰å¹´æœˆï¼š2020å¹´3æœˆç«£å·¥</p>
                    </div>
                    <div class="info-box">
                        <h4>ç‰©ä»¶ä¾¡æ ¼</h4>
                        <span class="highlight-number">6.8å„„å††</span>
                        <p>è¡¨é¢åˆ©å›ã‚Šï¼š6.35%</p>
                    </div>
                </div>

                <h3 class="subsection-title">ç«‹åœ°è©•ä¾¡</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>è©•ä¾¡é …ç›®</th>
                            <th>å†…å®¹</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>æœ€å¯„é§…</td>
                            <td>æ±äº¬ãƒ¡ãƒˆãƒ­ã€Œè¡¨å‚é“ã€é§… å¾’æ­©6åˆ† / ã€Œæ¸‹è°·ã€é§… å¾’æ­©12åˆ†</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                        <tr>
                            <td>éƒ½å¿ƒã‚¢ã‚¯ã‚»ã‚¹</td>
                            <td>éŠ€åº§ç·šãƒ»åŠè”µé–€ç·šãƒ»åƒä»£ç”°ç·šåˆ©ç”¨å¯ã€ä¸»è¦é§…ç›´é€š</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                        <tr>
                            <td>å‘¨è¾ºç’°å¢ƒ</td>
                            <td>é’å±±é€šã‚Šæ²¿ã„ã€é«˜ç´šãƒ–ãƒ©ãƒ³ãƒ‰åº—ãƒ»é£²é£Ÿåº—é›†ç©ã‚¨ãƒªã‚¢</td>
                            <td>â˜…â˜…â˜…â˜…â˜…</td>
                        </tr>
                    </tbody>
                </table>

                <h3 class="subsection-title">è¿‘éš£è³ƒè²¸å¸‚å ´åˆ†æ</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">ã‚¨ãƒªã‚¢å¹³å‡è³ƒæ–™</div>
                        <div class="kpi-value">28.5</div>
                        <div class="kpi-unit">ä¸‡å††/æœˆï¼ˆ1LDKï¼‰</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ç©ºå®¤ç‡</div>
                        <div class="kpi-value">2.8</div>
                        <div class="kpi-unit">%ï¼ˆæ¸¯åŒºå¹³å‡ï¼‰</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ç«¶åˆç‰©ä»¶æ•°</div>
                        <div class="kpi-value">8</div>
                        <div class="kpi-unit">æ£Ÿï¼ˆåŠå¾„500mï¼‰</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-black" onclick="advanceStage()">è©³ç´°æƒ…å ±ã‚’å¸Œæœ›ã™ã‚‹</button>
                    <button class="btn btn-outline-black" onclick="requestConsultation()">è³ªå•ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- 2. åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸2ã§é–‹ç¤ºï¼‰ -->
        <div id="simulation" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">2. æŠ•è³‡åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                
                <h3 class="subsection-title">æŠ•è³‡æ¦‚è¦</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">ç‰©ä»¶ä¾¡æ ¼</div>
                        <div class="kpi-value">6.8</div>
                        <div class="kpi-unit">å„„å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">æƒ³å®šå¹´é–“è³ƒæ–™</div>
                        <div class="kpi-value">4,320</div>
                        <div class="kpi-unit">ä¸‡å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">è¡¨é¢åˆ©å›ã‚Š</div>
                        <div class="kpi-value">6.35</div>
                        <div class="kpi-unit">%</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">å®Ÿè³ªåˆ©å›ã‚Š</div>
                        <div class="kpi-value">5.28</div>
                        <div class="kpi-unit">%</div>
                    </div>
                </div>

                <h3 class="subsection-title">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼äºˆæ¸¬ï¼ˆå¹´é–“ï¼‰</h3>
                <table class="specs-table">
                    <thead>
                        <tr>
                            <th>é …ç›®</th>
                            <th>1å¹´ç›®</th>
                            <th>5å¹´ç›®</th>
                            <th>10å¹´ç›®</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>è³ƒæ–™åå…¥</td>
                            <td style="text-align: right;">4,320ä¸‡å††</td>
                            <td style="text-align: right;">4,320ä¸‡å††</td>
                            <td style="text-align: right;">4,200ä¸‡å††</td>
                        </tr>
                        <tr>
                            <td>ç®¡ç†è²»ãƒ»ä¿®ç¹•è²»</td>
                            <td style="text-align: right;">-432ä¸‡å††</td>
                            <td style="text-align: right;">-450ä¸‡å††</td>
                            <td style="text-align: right;">-480ä¸‡å††</td>
                        </tr>
                        <tr>
                            <td>ãƒ­ãƒ¼ãƒ³è¿”æ¸ˆï¼ˆæƒ³å®šï¼‰</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                            <td style="text-align: right;">-2,040ä¸‡å††</td>
                        </tr>
                        <tr style="background: var(--primary-lighter);">
                            <td><strong>ç´”åç›Šï¼ˆç¨å‰ï¼‰</strong></td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,662ä¸‡å††</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,650ä¸‡å††</td>
                            <td style="text-align: right; font-weight: bold; color: var(--primary-dark);">1,505ä¸‡å††</td>
                        </tr>
                    </tbody>
                </table>

                <div class="action-buttons">
                    <button class="btn btn-black" onclick="advanceStage()">ä¾¡æ ¼æŸ»å®šã‚’ç¢ºèªã™ã‚‹</button>
                    <button class="btn btn-outline-black" onclick="requestConsultation()">å°‚é–€å®¶ã«ç›¸è«‡ã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- 3. ä¾¡æ ¼æŸ»å®šï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸3ã§é–‹ç¤ºï¼‰ -->
        <div id="valuation" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">3. PRISMç‹¬è‡ªä¾¡æ ¼æŸ»å®šåˆ†æ</h2>
                <h3 class="subsection-title">æŸ»å®šçµæœã‚µãƒãƒªãƒ¼</h3>
                <div class="kpi-grid">
                    <div class="kpi-card">
                        <div class="kpi-label">å£²å‡ºä¾¡æ ¼</div>
                        <div class="kpi-value">6.8</div>
                        <div class="kpi-unit">å„„å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">PRISMæŸ»å®šä¾¡æ ¼</div>
                        <div class="kpi-value">7.2</div>
                        <div class="kpi-unit">å„„å††</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">ä¾¡æ ¼å¦¥å½“æ€§</div>
                        <div class="kpi-value" style="color: var(--success);">å„ªè‰¯</div>
                        <div class="kpi-unit">å‰²å®‰åˆ¤å®š</div>
                    </div>
                    <div class="kpi-card">
                        <div class="kpi-label">æŠ•è³‡æ¨å¥¨åº¦</div>
                        <div class="kpi-value">S</div>
                        <div class="kpi-unit">æœ€å„ªå…ˆæ¨å¥¨</div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-black" onclick="advanceStage()">èè³‡è¨ˆç”»ã‚’ç¢ºèªã™ã‚‹</button>
                </div>
            </div>
        </div>

        <!-- 4. èè³‡è¨ˆç”»ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸4ã§é–‹ç¤ºï¼‰ -->
        <div id="finance" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">4. èè³‡è¨ˆç”»ãƒ»éŠ€è¡Œè©•ä¾¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                <h3 class="subsection-title">æ¨å¥¨èè³‡ãƒ—ãƒ©ãƒ³</h3>
                <div class="property-overview">
                    <div class="info-box">
                        <h4>èè³‡é‡‘é¡</h4>
                        <span class="highlight-number">5.1å„„å††</span>
                        <p>èè³‡æ¯”ç‡ï¼š75%</p>
                    </div>
                    <div class="info-box">
                        <h4>è‡ªå·±è³‡é‡‘</h4>
                        <span class="highlight-number">1.8å„„å††</span>
                        <p>é ­é‡‘ï¼‹è«¸è²»ç”¨</p>
                    </div>
                    <div class="info-box">
                        <h4>æƒ³å®šé‡‘åˆ©</h4>
                        <span class="highlight-number">1.2%</span>
                        <p>å¤‰å‹•é‡‘åˆ©ï¼ˆå„ªé‡é©ç”¨ï¼‰</p>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-black" onclick="advanceStage()">æœ€çµ‚ç¢ºèªã¸é€²ã‚€</button>
                </div>
            </div>
        </div>

        <!-- 5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸5ã§é–‹ç¤ºï¼‰ -->
        <div id="summary" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</h2>
                <div style="background: var(--primary-lighter); padding: 30px; text-align: center; margin: 20px 0;">
                    <h2 style="color: var(--primary-dark); margin-bottom: 20px;">PRISMæŠ•è³‡æ¨å¥¨åº¦</h2>
                    <span style="font-size: 4em; color: var(--primary-dark); font-weight: bold;">S</span>
                    <p style="margin-top: 10px; font-size: 1.2em;">æœ€å„ªå…ˆæ¨å¥¨</p>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-black" onclick="requestConsultation()">LINEã§å¥‘ç´„ç›¸è«‡</button>
                </div>
            </div>
        </div>

        <!-- 6. å¿…è¦æ›¸é¡ä¸€å¼ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸5ã§é–‹ç¤ºï¼‰ -->
        <div id="documents" class="tab-content">
            <div class="section-card">
                <h2 class="section-title">6. ã”æä¾›è³‡æ–™ä¸€è¦§</h2>
                <h3 class="subsection-title">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½è³‡æ–™</h3>
                <div style="background: var(--gray-50); padding: 30px;">
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                            <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                            ç‰©ä»¶æ¦‚è¦æ›¸ï¼ˆè©³ç´°ç‰ˆï¼‰
                        </li>
                        <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                            <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                            PRISMä¾¡å€¤è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ30ãƒšãƒ¼ã‚¸ï¼‰
                        </li>
                        <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                            <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                            10å¹´é–“åæ”¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆExcelï¼‰
                        </li>
                        <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                            <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                            é‡è¦äº‹é …èª¬æ˜æ›¸ï¼ˆæ¡ˆï¼‰
                        </li>
                        <li style="padding: 10px 0; position: relative; padding-left: 35px;">
                            <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                            å£²è²·å¥‘ç´„æ›¸ï¼ˆæ¡ˆï¼‰
                        </li>
                    </ul>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-black" onclick="alert('è³‡æ–™ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ')">å…¨è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¨è³‡æ–™é–‹æ”¾ï¼‰
        let currentStage = 5;
        let isAdminMode = false;
        
        function showTab(tabId, requiredStage) {
            // å¿…è¦ãªã‚¹ãƒ†ãƒ¼ã‚¸ã«é”ã—ã¦ã„ãªã„å ´åˆï¼ˆç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ã§ãªã‘ã‚Œã°ï¼‰
            if (requiredStage && requiredStage > currentStage && !isAdminMode) {
                showLockedMessage(requiredStage);
                return;
            }
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
            
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‹ã‚‰ active ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
            document.getElementById(tabId).classList.add('active');
            
            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ãƒœã‚¿ãƒ³ã« active ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
            const activeTab = Array.from(tabs).find(tab => 
                tab.textContent.includes(getTabTitle(tabId))
            );
            if (activeTab && !activeTab.classList.contains('locked')) {
                activeTab.classList.add('active');
            }
            
            // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function getTabTitle(tabId) {
            const titles = {
                'overview': 'ç‰©ä»¶æ¦‚è¦',
                'simulation': 'åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
                'valuation': 'ä¾¡æ ¼æŸ»å®š',
                'finance': 'èè³‡è¨ˆç”»',
                'summary': 'æŠ•è³‡åˆ¤æ–­',
                'documents': 'å¿…è¦æ›¸é¡'
            };
            return titles[tabId] || '';
        }
        
        function showLockedMessage(requiredStage) {
            const messages = {
                3: 'ä¾¡æ ¼æŸ»å®šåˆ†æã‚’ã”è¦§ã„ãŸã ãã«ã¯ã€è©³ç´°æ¤œè¨æ®µéšã¸ã®ç§»è¡ŒãŒå¿…è¦ã§ã™ã€‚',
                4: 'èè³‡è¨ˆç”»ã®è©³ç´°ã¯ã€å•†è«‡æ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚',
                5: 'æœ€çµ‚è³‡æ–™ã¯ã€å¥‘ç´„å‰ã®æœ€çµ‚ç¢ºèªæ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚'
            };
            
            alert(messages[requiredStage] || 'ã“ã®æƒ…å ±ã¯æ¬¡ã®æ®µéšã§ã”æä¾›ã„ãŸã—ã¾ã™ã€‚');
        }
        
        function requestUnlock(stage) {
            const actions = {
                3: 'ä¾¡æ ¼æŸ»å®šåˆ†æã®ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ç”³è«‹ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ‹…å½“è€…ã‚ˆã‚Šé€£çµ¡ã„ãŸã—ã¾ã™ã€‚',
                4: 'å•†è«‡ã®ãŠç”³ã—è¾¼ã¿ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚æ—¥ç¨‹èª¿æ•´ã®ã”é€£çµ¡ã‚’ã„ãŸã—ã¾ã™ã€‚',
                5: 'æœ€çµ‚æ¤œè¨æ®µéšã¸ã®ç§»è¡Œã‚’ç¢ºèªã—ã¾ã—ãŸã€‚å…¨è³‡æ–™ã‚’æº–å‚™ã„ãŸã—ã¾ã™ã€‚'
            };
            
            alert(actions[stage]);
            // å®Ÿéš›ã«ã¯ã“ã“ã§APIã‚³ãƒ¼ãƒ«ãªã©ã‚’è¡Œã†
        }
        
        function advanceStage() {
            if (currentStage < 5) {
                currentStage++;
                updateStageIndicator();
                unlockContent();
                alert(`ã‚¹ãƒ†ãƒ¼ã‚¸${currentStage}ã«é€²ã¿ã¾ã—ãŸã€‚æ–°ã—ã„æƒ…å ±ãŒã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚`);
            }
        }
        
        function updateStageIndicator() {
            // ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’æ›´æ–°
            const stageItems = document.querySelectorAll('.stage-item');
            stageItems.forEach((item, index) => {
                if (index < currentStage - 1) {
                    item.classList.add('completed');
                    item.classList.remove('current');
                } else if (index === currentStage - 1) {
                    item.classList.add('current');
                    item.classList.remove('completed');
                } else {
                    item.classList.remove('completed', 'current');
                }
            });
            
            // ã‚¹ãƒ†ãƒ¼ã‚¸èª¬æ˜ã‚’æ›´æ–°
            const descriptions = {
                1: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸1ï¼šåˆå›æ¥è§¦',
                    desc: 'ç‰©ä»¶ã®åŸºæœ¬æƒ…å ±ã‚’ã”ç¢ºèªã„ãŸã ãæ®µéšã§ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦',
                    next: 'åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³'
                },
                2: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸2ï¼šé–¢å¿ƒè¡¨æ˜',
                    desc: 'ç‰©ä»¶æ¦‚è¦ã‚’ã”ç¢ºèªã„ãŸã ãã€ã‚ˆã‚Šè©³ç´°ãªåç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã”è¦§ã„ãŸã ã‘ã‚‹æ®µéšã§ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³',
                    next: 'ä¾¡æ ¼æŸ»å®šåˆ†æã€èè³‡è¨ˆç”»è©³ç´°'
                },
                3: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸3ï¼šè©³ç´°æ¤œè¨',
                    desc: 'PRISMç‹¬è‡ªã®ä¾¡æ ¼æŸ»å®šåˆ†æã«ã‚ˆã‚Šã€æŠ•è³‡åˆ¤æ–­ã®ææ–™ã‚’ã”æä¾›ã—ã¾ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾¡æ ¼æŸ»å®š',
                    next: 'èè³‡è¨ˆç”»è©³ç´°ã€æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼'
                },
                4: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸4ï¼šå•†è«‡',
                    desc: 'èè³‡è¨ˆç”»ã‚’å«ã‚€å…·ä½“çš„ãªæŠ•è³‡ãƒ—ãƒ©ãƒ³ã‚’ã”ææ¡ˆã—ã¾ã™ã€‚',
                    unlocked: 'ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ä¾¡æ ¼æŸ»å®šã€èè³‡è¨ˆç”»',
                    next: 'æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼ã€å¥‘ç´„æ›¸é¡'
                },
                5: {
                    title: 'ã‚¹ãƒ†ãƒ¼ã‚¸5ï¼šæœ€çµ‚ç¢ºèª',
                    desc: 'å…¨ã¦ã®æƒ…å ±ã‚’é–‹ç¤ºã—ã€æœ€çµ‚çš„ãªæŠ•è³‡åˆ¤æ–­ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚',
                    unlocked: 'å…¨è³‡æ–™',
                    next: 'å¥‘ç´„æ‰‹ç¶šãã¸'
                }
            };
            
            const stageDesc = descriptions[currentStage];
            if (stageDesc) {
                document.querySelector('.stage-description').innerHTML = `
                    <h3>${stageDesc.title}</h3>
                    <p>${stageDesc.desc}</p>
                    <p style="margin-top: 10px;"><strong>ã‚¢ãƒ³ãƒ­ãƒƒã‚¯æ¸ˆã¿ï¼š</strong>${stageDesc.unlocked}</p>
                    <p><strong>æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã§é–‹ç¤ºï¼š</strong>${stageDesc.next}</p>
                `;
            }
        }
        
        function unlockContent() {
            const tabs = document.querySelectorAll('.nav-tab');
            const unlockMap = {
                1: [0],              // ã‚¹ãƒ†ãƒ¼ã‚¸1: ç‰©ä»¶æ¦‚è¦ã®ã¿
                2: [0, 1],           // ã‚¹ãƒ†ãƒ¼ã‚¸2: ç‰©ä»¶æ¦‚è¦ã€åç›Šã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
                3: [0, 1, 2],        // ã‚¹ãƒ†ãƒ¼ã‚¸3: ï¼‹ä¾¡æ ¼æŸ»å®š
                4: [0, 1, 2, 3],     // ã‚¹ãƒ†ãƒ¼ã‚¸4: ï¼‹èè³‡è¨ˆç”»
                5: [0, 1, 2, 3, 4, 5] // ã‚¹ãƒ†ãƒ¼ã‚¸5: å…¨ã¦
            };
            
            tabs.forEach((tab, index) => {
                if ((unlockMap[currentStage] && unlockMap[currentStage].includes(index)) || isAdminMode) {
                    tab.classList.remove('locked');
                } else {
                    tab.classList.add('locked');
                }
            });
        }

        // ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰ã®åˆ‡æ›¿
        function toggleAdminMode() {
            isAdminMode = !isAdminMode;
            const adminPanel = document.getElementById('adminPanel');
            const adminOverlay = document.getElementById('adminOverlay');
            const adminBtn = document.getElementById('adminToggle');
            
            if (isAdminMode) {
                adminPanel.style.display = 'block';
                adminOverlay.style.display = 'block';
                adminBtn.style.background = 'var(--primary-light)';
                adminBtn.innerHTML = 'ğŸ”§ ç®¡ç†è€…ï¼ˆONï¼‰';
                unlockContent(); // ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯å…¨ã‚¿ãƒ–ã‚¢ãƒ³ãƒ­ãƒƒã‚¯
                
                // ãƒ¢ãƒã‚¤ãƒ«ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é˜²æ­¢
                if (window.innerWidth <= 768) {
                    document.body.style.overflow = 'hidden';
                }
            } else {
                adminPanel.style.display = 'none';
                adminOverlay.style.display = 'none';
                adminBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                adminBtn.innerHTML = 'ğŸ”§ ç®¡ç†è€…';
                unlockContent(); // é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã™
                document.body.style.overflow = '';
            }
        }
        
        // ç®¡ç†è€…ãƒ‘ãƒãƒ«ã‚’é–‰ã˜ã‚‹
        function closeAdminPanel() {
            isAdminMode = false;
            const adminPanel = document.getElementById('adminPanel');
            const adminOverlay = document.getElementById('adminOverlay');
            const adminBtn = document.getElementById('adminToggle');
            
            adminPanel.style.display = 'none';
            adminOverlay.style.display = 'none';
            adminBtn.style.background = 'rgba(255, 255, 255, 0.2)';
            adminBtn.innerHTML = 'ğŸ”§ ç®¡ç†è€…';
            unlockContent(); // é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã«æˆ»ã™
            document.body.style.overflow = '';
        }
        
        // ã‚¹ãƒ†ãƒ¼ã‚¸è¨­å®šï¼ˆç®¡ç†è€…ç”¨ï¼‰
        function setStage(stage) {
            currentStage = stage;
            updateStageIndicator();
            unlockContent();
            // loadStageContent(stage); // å‰Šé™¤: HTMLã«æ—¢ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹ãŸã‚ä¸è¦
            
            // ãƒœã‚¿ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.stage-btn').forEach(btn => {
                btn.style.background = 'white';
                btn.style.borderColor = 'var(--gray-200)';
                btn.style.color = 'inherit';
            });
            event.target.style.background = 'var(--primary-lighter)';
            event.target.style.borderColor = 'var(--primary-light)';
            event.target.style.color = 'var(--primary-dark)';
            
            // ç®¡ç†è€…æƒ…å ±ã‚’æ›´æ–°
            document.getElementById('currentStageInfo').textContent = `ã‚¹ãƒ†ãƒ¼ã‚¸${stage}`;
            
            // è©²å½“ã™ã‚‹ã‚¿ãƒ–ã‚’è¡¨ç¤º
            if (stage === 1) showTab('overview', 1);
            else if (stage === 2) showTab('simulation', 2);
            else if (stage >= 3) showTab('overview', 1);
        }
        
        // é¡§å®¢ã‚¿ã‚¤ãƒ—å¤‰æ›´ï¼ˆç®¡ç†è€…ç”¨ï¼‰
        function changeCustomerType() {
            const customerType = document.getElementById('customerType').value;
            const customerNames = {
                'new': 'æ–°è¦é¡§å®¢ï¼ˆç”°ä¸­æ§˜ï¼‰',
                'interested': 'é–¢å¿ƒé¡§å®¢ï¼ˆéˆ´æœ¨æ§˜ï¼‰',
                'serious': 'æœ¬æ ¼æ¤œè¨ï¼ˆå±±ç”°æ§˜ï¼‰',
                'negotiating': 'å•†è«‡ä¸­ï¼ˆä½è—¤æ§˜ï¼‰',
                'closing': 'æˆç´„å‰ï¼ˆé«˜æ©‹æ§˜ï¼‰'
            };
            
            const stageMap = {
                'new': 1,
                'interested': 2,
                'serious': 3,
                'negotiating': 4,
                'closing': 5
            };
            
            document.getElementById('currentCustomer').textContent = customerNames[customerType];
            setStage(stageMap[customerType]);
        }
        
        // å…¨è³‡æ–™ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ï¼ˆç®¡ç†è€…ç”¨ï¼‰
        function unlockAll() {
            currentStage = 5;
            updateStageIndicator();
            unlockContent();
            // loadStageContent(5); // å‰Šé™¤: HTMLã«æ—¢ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹ãŸã‚ä¸è¦
            alert('å…¨ã¦ã®è³‡æ–™ãŒã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã•ã‚Œã¾ã—ãŸã€‚');
            
            // UIæ›´æ–°
            document.getElementById('currentStageInfo').textContent = 'ã‚¹ãƒ†ãƒ¼ã‚¸5';
            document.getElementById('customerType').value = 'closing';
            document.getElementById('currentCustomer').textContent = 'æˆç´„å‰ï¼ˆé«˜æ©‹æ§˜ï¼‰';
        }
        
        // ãƒªã‚»ãƒƒãƒˆï¼ˆç®¡ç†è€…ç”¨ï¼‰
        function resetAll() {
            currentStage = 2;
            updateStageIndicator();
            unlockContent();
            // resetContent(); // å‰Šé™¤: HTMLã«æ—¢ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒã‚ã‚‹ãŸã‚ä¸è¦
            showTab('overview', 1);
            document.getElementById('customerType').value = 'interested';
            document.getElementById('currentCustomer').textContent = 'é–¢å¿ƒé¡§å®¢ï¼ˆéˆ´æœ¨æ§˜ï¼‰';
            document.getElementById('currentStageInfo').textContent = 'ã‚¹ãƒ†ãƒ¼ã‚¸2';
            alert('åˆæœŸçŠ¶æ…‹ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸2ï¼‰ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸã€‚');
        }

        // ã‚¹ãƒ†ãƒ¼ã‚¸ã”ã¨ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„èª­ã¿è¾¼ã¿ï¼ˆå»ƒæ­¢ï¼šHTMLã«ç›´æ¥è¨˜è¼‰ï¼‰
        /* function loadStageContent(stage) {
            if (stage >= 3) {
                // ä¾¡æ ¼æŸ»å®šã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦å®Ÿã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
                document.querySelector('#valuation .section-card').innerHTML = `
                    <h2 class="section-title">3. PRISMç‹¬è‡ªä¾¡æ ¼æŸ»å®šåˆ†æ</h2>
                    <h3 class="subsection-title">æŸ»å®šçµæœã‚µãƒãƒªãƒ¼</h3>
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-label">å£²å‡ºä¾¡æ ¼</div>
                            <div class="kpi-value">6.8</div>
                            <div class="kpi-unit">å„„å††</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">PRISMæŸ»å®šä¾¡æ ¼</div>
                            <div class="kpi-value">7.2</div>
                            <div class="kpi-unit">å„„å††</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">ä¾¡æ ¼å¦¥å½“æ€§</div>
                            <div class="kpi-value" style="color: var(--success);">å„ªè‰¯</div>
                            <div class="kpi-unit">å‰²å®‰åˆ¤å®š</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-label">æŠ•è³‡æ¨å¥¨åº¦</div>
                            <div class="kpi-value">S</div>
                            <div class="kpi-unit">æœ€å„ªå…ˆæ¨å¥¨</div>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-black" onclick="advanceStage()">èè³‡è¨ˆç”»ã‚’ç¢ºèªã™ã‚‹</button>
                    </div>
                `;
            }
            
            if (stage >= 4) {
                // èè³‡è¨ˆç”»ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
                document.querySelector('#finance .section-card').innerHTML = `
                    <h2 class="section-title">4. èè³‡è¨ˆç”»ãƒ»éŠ€è¡Œè©•ä¾¡ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>
                    <h3 class="subsection-title">æ¨å¥¨èè³‡ãƒ—ãƒ©ãƒ³</h3>
                    <div class="property-overview">
                        <div class="info-box">
                            <h4>èè³‡é‡‘é¡</h4>
                            <span class="highlight-number">5.1å„„å††</span>
                            <p>èè³‡æ¯”ç‡ï¼š75%</p>
                        </div>
                        <div class="info-box">
                            <h4>è‡ªå·±è³‡é‡‘</h4>
                            <span class="highlight-number">1.8å„„å††</span>
                            <p>é ­é‡‘ï¼‹è«¸è²»ç”¨</p>
                        </div>
                        <div class="info-box">
                            <h4>æƒ³å®šé‡‘åˆ©</h4>
                            <span class="highlight-number">1.2%</span>
                            <p>å¤‰å‹•é‡‘åˆ©ï¼ˆå„ªé‡é©ç”¨ï¼‰</p>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-black" onclick="advanceStage()">æœ€çµ‚ç¢ºèªã¸é€²ã‚€</button>
                    </div>
                `;
            }
            
            if (stage >= 5) {
                // æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
                document.querySelector('#summary .section-card').innerHTML = `
                    <h2 class="section-title">5. æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</h2>
                    <div style="background: var(--primary-lighter); padding: 30px; text-align: center; margin: 20px 0;">
                        <h2 style="color: var(--primary-dark); margin-bottom: 20px;">PRISMæŠ•è³‡æ¨å¥¨åº¦</h2>
                        <span style="font-size: 4em; color: var(--primary-dark); font-weight: bold;">S</span>
                        <p style="margin-top: 10px; font-size: 1.2em;">æœ€å„ªå…ˆæ¨å¥¨</p>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-black" onclick="requestConsultation()">LINEã§å¥‘ç´„ç›¸è«‡</button>
                    </div>
                `;
                
                // å¿…è¦æ›¸é¡ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
                document.querySelector('#documents .section-card').innerHTML = `
                    <h2 class="section-title">6. ã”æä¾›è³‡æ–™ä¸€è¦§</h2>
                    <h3 class="subsection-title">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å¯èƒ½è³‡æ–™</h3>
                    <div style="background: var(--gray-50); padding: 30px;">
                        <ul style="list-style: none; padding: 0;">
                            <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                                <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                                ç‰©ä»¶æ¦‚è¦æ›¸ï¼ˆè©³ç´°ç‰ˆï¼‰
                            </li>
                            <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                                <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                                PRISMä¾¡å€¤è©•ä¾¡ãƒ¬ãƒãƒ¼ãƒˆï¼ˆ30ãƒšãƒ¼ã‚¸ï¼‰
                            </li>
                            <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                                <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                                10å¹´é–“åæ”¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆExcelï¼‰
                            </li>
                            <li style="padding: 10px 0; border-bottom: 1px solid var(--gray-100); position: relative; padding-left: 35px;">
                                <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                                é‡è¦äº‹é …èª¬æ˜æ›¸ï¼ˆæ¡ˆï¼‰
                            </li>
                            <li style="padding: 10px 0; position: relative; padding-left: 35px;">
                                <span style="position: absolute; left: 0; color: var(--success); font-weight: bold; font-size: 1.2em;">âœ“</span>
                                å£²è²·å¥‘ç´„æ›¸ï¼ˆæ¡ˆï¼‰
                            </li>
                        </ul>
                    </div>
                    <div class="action-buttons">
                        <button class="btn btn-black" onclick="alert('è³‡æ–™ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ')">å…¨è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
                    </div>
                `;
            }
        } */

        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒªã‚»ãƒƒãƒˆï¼ˆå»ƒæ­¢ï¼šHTMLã«ç›´æ¥è¨˜è¼‰ï¼‰
        /* function resetContent() {
            // ãƒ­ãƒƒã‚¯ç”»é¢ã‚’å†è¨­å®š
            document.querySelector('#valuation .section-card').innerHTML = `
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">ä¾¡æ ¼æŸ»å®šåˆ†æ</h2>
                        <p class="locked-description">
                            PRISMç‹¬è‡ªã®3æ‰‹æ³•ã«ã‚ˆã‚‹è©³ç´°ãªä¾¡æ ¼æŸ»å®šåˆ†æã‚’ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚<br>
                            ã‚¨ãƒªã‚¢ç›¸å ´ã¨ã®æ¯”è¼ƒã€æŠ•è³‡å¦¥å½“æ€§ã®åˆ¤å®šçµæœã‚’å«ã¿ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(3)">
                            ã‚¢ãƒ³ãƒ­ãƒƒã‚¯ã‚’ç”³è«‹ã™ã‚‹
                        </button>
                    </div>
                </div>
            `;
            document.querySelector('#finance .section-card').innerHTML = `
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">èè³‡è¨ˆç”»è©³ç´°</h2>
                        <p class="locked-description">
                            ææºé‡‘èæ©Ÿé–¢ã®èè³‡æ¡ä»¶ã€å¿…è¦å±æ€§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€<br>
                            éŠ€è¡Œè©•ä¾¡é¡äºˆæ¸¬ãªã©ã€èè³‡å®Ÿç¾ã«å‘ã‘ãŸè©³ç´°æƒ…å ±ã‚’ã”æä¾›ã—ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(4)">
                            å•†è«‡ã‚’ç”³ã—è¾¼ã‚€
                        </button>
                    </div>
                </div>
            `;
            document.querySelector('#summary .section-card').innerHTML = `
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">æŠ•è³‡åˆ¤æ–­ã‚µãƒãƒªãƒ¼</h2>
                        <p class="locked-description">
                            ç·åˆè©•ä¾¡ã€ãƒªã‚¹ã‚¯åˆ†æã€æŠ•è³‡ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç­‰ã€<br>
                            æœ€çµ‚çš„ãªæŠ•è³‡åˆ¤æ–­ã«å¿…è¦ãªå…¨æƒ…å ±ã‚’çµ±åˆã—ãŸãƒ¬ãƒãƒ¼ãƒˆã§ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            æœ€çµ‚æ¤œè¨æ®µéšã¸é€²ã‚€
                        </button>
                    </div>
                </div>
            `;
            document.querySelector('#documents .section-card').innerHTML = `
                <div class="locked-overlay">
                    <div class="locked-content">
                        <div class="locked-icon">ğŸ”’</div>
                        <h2 class="locked-title">å¥‘ç´„é–¢é€£æ›¸é¡ä¸€å¼</h2>
                        <p class="locked-description">
                            é‡è¦äº‹é …èª¬æ˜æ›¸ã€å£²è²·å¥‘ç´„æ›¸æ¡ˆã€ç™»è¨˜é–¢é€£æ›¸é¡ç­‰ã€<br>
                            å¥‘ç´„ã«å¿…è¦ãªå…¨ã¦ã®æ›¸é¡ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã„ãŸã ã‘ã¾ã™ã€‚
                        </p>
                        <button class="unlock-button" onclick="requestUnlock(5)">
                            å¥‘ç´„æº–å‚™ã‚’é–‹å§‹ã™ã‚‹
                        </button>
                    </div>
                </div>
            `;
        } */

        function requestConsultation() {
            window.open('https://line.me/ti/p/@prism', '_blank');
        }

        // ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
        function logout() {
            sessionStorage.removeItem('prism_user');
            window.location.href = '/';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¡¨ç¤º
            const user = JSON.parse(sessionStorage.getItem('prism_user') || '{}');
            if (user.name) {
                document.getElementById('memberName').textContent = user.name;
            }

            // åˆæœŸçŠ¶æ…‹è¨­å®šï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸5ã§å…¨è³‡æ–™é–‹æ”¾ï¼‰
            currentStage = 5;
            updateStageIndicator();
            unlockContent();
            
            // ç®¡ç†è€…ãƒ‘ãƒãƒ«ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’æ›´æ–°
            document.getElementById('customerType').value = 'closing';
            document.getElementById('currentCustomer').textContent = 'æˆç´„å‰ï¼ˆé«˜æ©‹æ§˜ï¼‰';
            document.getElementById('currentStageInfo').textContent = 'ã‚¹ãƒ†ãƒ¼ã‚¸5';
        });
    </script>
</body>
</html>